<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">


<title>beautiful dream</title>

<link rel="stylesheet" href="/v1/taskmanage.css">

<link rel="icon" href="https://photosfor2018.oss-cn-hangzhou.aliyuncs.com/dreamforfuture.png">  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">

<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900'>
<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Montserrat:400,700'>
<link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
<!-- <link rel="stylesheet" href="/v1/user.css"> -->
<!-- 上面的css中包含背景，给注释掉了，这样就不显示背景了 -->




<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<!-- <script  src="/v1/index.js"></script> -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="https://test-1255367272.cos.ap-chengdu.myqcloud.com/inputtag.js"></script>

<!-- 下面是日历的脚本 -->
<script>
  var SimplePicker=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}({0:function(e,t,i){i("iyB0"),e.exports=i("TYVf")},"0DyV":function(e,t,i){"use strict";function n(e,t){e=[].concat(e);for(var i=0;i<t;i++)e[i]=void 0;return e}function r(e){var i=new Date(e.getTime()),r=e.getFullYear(),s=e.getMonth(),a={date:i,month:void 0};if(t.monthTracker.current=new Date(e.getTime()),t.monthTracker.current.setDate(1),t.monthTracker.years[r]=t.monthTracker.years[r]||{},void 0!==t.monthTracker.years[r][s])return a.month=t.monthTracker.years[r][s],a;(e=new Date(e.getTime())).setDate(1),t.monthTracker.years[r][s]=[];for(var c=t.monthTracker.years[r][s],o=0;e.getMonth()===s;){var l=e.getDate(),p=e.getDay();1===l&&(c[o]=n([],p)),c[o]=c[o]||[],c[o][p]=l,6===p&&o++,e.setDate(e.getDate()+1)}var d=5;void 0===c[5]&&(d=4,c[5]=n([],7));var m=c[d].length;if(m<7){var h=c[d].concat(n([],7-m));c[d]=h}return a.month=c,a}Object.defineProperty(t,"__esModule",{value:!0}),t.monthTracker={years:{}},t.months=["January","February","March","April","May","June","July","August","September","October","November","December"],t.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.scrapeMonth=r,t.scrapePreviousMonth=function(){var e=t.monthTracker.current;if(!e)throw Error("scrapePrevoisMonth called without setting monthTracker.current!");return e.setMonth(e.getMonth()-1),r(e)},t.scrapeNextMonth=function(){var e=t.monthTracker.current;if(!e)throw Error("scrapePrevoisMonth called without setting monthTracker.current!");return e.setMonth(e.getMonth()+1),r(e)};var s={st:[1,21,31],nd:[2,22],rd:[3,23]};t.getDisplayDate=function(e){var t=e.getDate();return-1!==s.st.indexOf(t)?t+"st":-1!==s.nd.indexOf(t)?t+"nd":-1!==s.rd.indexOf(t)?t+"rd":t+"th"},t.formatTimeFromInputElement=function(e){var t="",i=e.split(":"),n=i[0],r=(n=+n)>=12;return r&&n>12&&(n-=12),r||0!==n||(n=12),t+=n<10?"0"+n:n,t+=":"+i[1]+" ",t+=r?"PM":"AM"}},TYVf:function(e,t,i){"use strict";var n=i("0DyV"),r=i("ht6X"),s=new Date,a=function(){function e(e,t){var i;if("object"==typeof e&&(t=e,i=void 0),"string"==typeof(i=i||"body")&&(i=document.querySelector(i)),!i)throw new Error("SimplePicker: Valid selector or element must be passed!");t||(t={}),this.selectedDate=new Date,this.$simplepicker=i,this.initElMethod(i),this.injectTemplate(),this.init(t),this.initListeners(),this._eventHandlers={},this._validOnListeners=["submit","close"]}return e.prototype.initElMethod=function(e){this.$=function(t){return e.querySelector(t)},this.$$=function(t){return e.querySelectorAll(t)}},e.prototype.init=function(e){var t=this.$,i=this.$$;this.$simplepicker=t(".simpilepicker-date-picker"),this.$simplepickerWrapper=t(".simplepicker-wrapper"),this.$trs=i(".simplepicker-calender tbody tr"),this.$tds=i(".simplepicker-calender tbody td"),this.$headerMonthAndYear=t(".simplepicker-month-and-year"),this.$monthAndYear=t(".simplepicker-selected-date"),this.$date=t(".simplepicker-date"),this.$day=t(".simplepicker-day-header"),this.$time=t(".simplepicker-time"),this.$timeInput=t(".simplepicker-time-section input"),this.$timeSectionIcon=t(".simplepicker-icon-time"),this.$cancel=t(".simplepicker-cancel-btn"),this.$ok=t(".simplepicker-ok-btn"),this.$displayDateElements=[this.$day,this.$headerMonthAndYear,this.$date],this.$time.classList.add("simplepicker-fade"),this.render(n.scrapeMonth(s)),e=e||{},this.opts=e,this.reset(s),void 0!==e.zIndex&&(this.$simplepickerWrapper.style.zIndex=e.zIndex.toString()),e.disableTimeSection&&this.disableTimeSection(),e.compactMode&&this.compactMode()},e.prototype.reset=function(e){var t=e||new Date;this.render(n.scrapeMonth(t));var i=t.getDate().toString(),r=this.findElementWithDate(i);r.classList.contains("active")||(this.selectDateElement(r),this.updateDateComponents(t));var s=t.toTimeString().split(" ")[0].replace(/\:\d\d$/,"");this.$timeInput.value=s,this.$time.innerText=n.formatTimeFromInputElement(s)},e.prototype.compactMode=function(){this.$date.style.display="none"},e.prototype.disableTimeSection=function(){this.$timeSectionIcon.style.visibility="hidden"},e.prototype.enableTimeSection=function(){this.$timeSectionIcon.style.visibility="visible"},e.prototype.injectTemplate=function(){var e=document.createElement("template");e.innerHTML=r.htmlTemplate,this.$simplepicker.appendChild(e.content.cloneNode(!0))},e.prototype.clearRows=function(){this.$tds.forEach(function(e){e.innerHTML="",e.classList.remove("active")})},e.prototype.updateDateComponents=function(e){var t=n.days[e.getDay()],i=n.months[e.getMonth()]+" "+e.getFullYear();this.$headerMonthAndYear.innerHTML=i,this.$monthAndYear.innerHTML=i,this.$day.innerHTML=t,this.$date.innerHTML=n.getDisplayDate(e)},e.prototype.render=function(e){var t=this.$$,i=this.$trs,n=e.month,r=e.date;this.clearRows(),n.forEach(function(e,t){var n=i[t].children;e.forEach(function(e,t){var i=n[t];e?(i.removeAttribute("data-empty"),i.innerHTML=e):i.setAttribute("data-empty","")})});var s=t("table tbody tr:last-child td"),a=!0;s.forEach(function(e){void 0===e.dataset.empty&&(a=!1)});var c=s[0].parentElement;c.style.display=a&&c?"none":"table-row",this.updateDateComponents(r)},e.prototype.updateSelectedDate=function(e){var t,i=this.$monthAndYear,r=this.$time;this.$date;t=e?e.innerHTML.trim():this.$date.innerHTML.replace(/[a-z]+/,"");var s=i.innerHTML.split(" "),a=s[0],c=s[1],o=n.months.indexOf(a),l=r.innerHTML.split(":"),p=+l[0],d=l[1].split(" "),m=d[0],h=d[1];"AM"===h&&12==p&&(p=0),"PM"===h&&p<12&&(p+=12);var u=new Date(+c,+o,+t,+p,+m);this.selectedDate=u;var v=t+" ";v+=i.innerHTML.trim()+" ",v+=r.innerHTML.trim(),this.readableDate=v.replace(/^\d+/,u.getDate().toString())},e.prototype.selectDateElement=function(e){var t=this.$(".simplepicker-calender tbody .active");e.classList.add("active"),t&&t.classList.remove("active"),this.updateSelectedDate(e),this.updateDateComponents(this.selectedDate)},e.prototype.findElementWithDate=function(e,t){var i,n;return void 0===t&&(t=!1),this.$tds.forEach(function(t){var r=t.innerHTML.trim();r===e&&(i=t),""!==r&&(n=t)}),void 0===i&&t&&(i=n),i},e.prototype.handleIconButtonClick=function(e){var t,i=this.$;if(e.classList.contains("simplepicker-icon-calender")){var r=i(".simplepicker-icon-time"),s=i(".simplepicker-time-section");return(c=i(".simplepicker-calender-section")).style.display="block",s.style.display="none",r.classList.remove("active"),e.classList.add("active"),void this.toogleDisplayFade()}if(e.classList.contains("simplepicker-icon-time")){var a=i(".simplepicker-icon-calender"),c=i(".simplepicker-calender-section");return(s=i(".simplepicker-time-section")).style.display="block",c.style.display="none",a.classList.remove("active"),e.classList.add("active"),void this.toogleDisplayFade()}var o=i(".simplepicker-calender td.active");if(o&&(t=o.innerHTML.trim()),e.classList.contains("simplepicker-icon-next")&&this.render(n.scrapeNextMonth()),e.classList.contains("simplepicker-icon-previous")&&this.render(n.scrapePreviousMonth()),t){var l=this.findElementWithDate(t,!0);this.selectDateElement(l)}},e.prototype.initListeners=function(){var e=this,t=e.$simplepicker,i=e.$timeInput,r=e.$ok,s=e.$cancel,a=e.$simplepickerWrapper,c=this;function o(){c.close(),c.callEvent("close",function(e){e()})}t.addEventListener("click",function(e){var t=e.target,i=t.tagName.toLowerCase();e.stopPropagation(),"td"!==i?"button"===i&&t.classList.contains("simplepicker-icon")&&c.handleIconButtonClick(t):c.selectDateElement(t)}),i.addEventListener("input",function(e){if(""!==e.target.value){var t=n.formatTimeFromInputElement(e.target.value);c.$time.innerHTML=t,c.updateSelectedDate()}}),r.addEventListener("click",function(){c.close(),c.callEvent("submit",function(e){e(c.selectedDate,c.readableDate)})}),s.addEventListener("click",o),a.addEventListener("click",o)},e.prototype.callEvent=function(e,t){(this._eventHandlers[e]||[]).forEach(function(e){t(e)})},e.prototype.open=function(){this.$simplepickerWrapper.classList.add("active")},e.prototype.close=function(){this.$simplepickerWrapper.classList.remove("active")},e.prototype.on=function(e,t){var i=this._validOnListeners,n=this._eventHandlers;if(!i.includes(e))throw new Error("Not a valid event!");n[e]=n[e]||[],n[e].push(t)},e.prototype.toogleDisplayFade=function(){this.$time.classList.toggle("simplepicker-fade"),this.$displayDateElements.forEach(function(e){e.classList.toggle("simplepicker-fade")})},e}();e.exports=a},ht6X:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.htmlTemplate='\n<div class="simplepicker-wrapper">\n  <div class="simpilepicker-date-picker">\n    <div class="simplepicker-day-header"></div>\n      <div class="simplepicker-date-section">\n        <div class="simplepicker-month-and-year"></div>\n        <div class="simplepicker-date"></div>\n        <div class="simplepicker-select-pane">\n          <button class="simplepicker-icon simplepicker-icon-calender active" title="Select date from calender!"></button>\n          <div class="simplepicker-time">12:00 PM</div>\n          <button class="simplepicker-icon simplepicker-icon-time" title="Select time"></button>\n        </div>\n      </div>\n      <div class="simplepicker-picker-section">\n        <div class="simplepicker-calender-section">\n          <div class="simplepicker-month-switcher simplepicker-select-pane">\n            <button class="simplepicker-icon simplepicker-icon-previous"></button>\n            <div class="simplepicker-selected-date"></div>\n            <button class="simplepicker-icon simplepicker-icon-next"></button>\n          </div>\n          <div class="simplepicker-calender">\n            <table>\n              <thead>\n                <tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>\n              </thead>\n              <tbody>\n                '+function(e,t){for(var i="",n=1;n<=t;n++)i+=e;return i}("<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>",6)+'\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class="simplepicker-time-section">\n          <input type="time" value="12:00" autofocus="false">\n        </div>\n      </div>\n      <div class="simplepicker-bottom-part">\n        <button class="simplepicker-cancel-btn simplepicker-btn" title="Cancel">Cancel</button>\n        <button class="simplepicker-ok-btn simplepicker-btn" title="OK">OK</button>\n      </div>\n  </div>\n</div>\n'},iyB0:function(e,t,i){}});
// #sourceMappingURL=simplepicker.js.map

</script>

<script>
  // 漂亮的多选框
  /*
Copyright (C) Philippe Meyer 2019-2020
Distributed under the MIT License  

vanillaSelectBox : v0.51 : Translations for select all/clear all + minor css corrections + don't select disabled items
vanillaSelectBox : v0.50 : PR by jaguerra2017 adding a select all/clear all check button + optgroup support !
vanillaSelectBox : v0.41 : Bug corrected, the menu content was misplaced if a css transform was applied on a parent
vanillaSelectBox : v0.40 : A click on one selectBox close the other opened boxes
vanillaSelectBox : v0.35 : You can enable and disable items
vanillaSelectBox : v0.30 : The menu stops moving around on window resize and scroll + z-index in order of creation for multiple instances
vanillaSelectBox : v0.26 : Corrected bug in stayOpen mode with disable() function
vanillaSelectBox : v0.25 : New option stayOpen, and the dropbox is no longer a dropbox but a nice multi-select
previous version : v0.24 : corrected bug affecting options with more than one class
https://github.com/PhilippeMarcMeyer/vanillaSelectBox
*/

let VSBoxCounter = function () {
    let count = 0;
    let instances = [];
    return {
        set: function (instancePtr) {
            instances.push({offset:++count,ptr:instancePtr});
            return instances[instances.length-1].offset;
        },
        remove: function (instanceNr) {
            let temp = instances.filter(function(x){
               return x.offset != instanceNr;
            })
            instances = temp.splice(0);
            temp = [];
        },
        closeAllButMe:function(instanceNr){
            temp = [];
            instances.forEach(function(x){
                if(x.offset != instanceNr){
                    x.ptr.closeOrder();
                }
             });
        }
    };
}();

function vanillaSelectBox(domSelector, options) {
    let self = this;
    this.instanceOffset = VSBoxCounter.set(self);
    this.domSelector = domSelector;
    this.root = document.querySelector(domSelector)
    this.main;
    this.button;
    this.title;
    this.isMultiple = this.root.hasAttribute("multiple");
    this.multipleSize = this.isMultiple && this.root.hasAttribute("size") ? parseInt(this.root.getAttribute("size")) : -1;
    this.drop;
    this.top;
    this.left;
    this.options;
    this.listElements;
    this.isDisabled = false;
    this.search = false;
    this.searchZone = null;
    this.inputBox = null;
    this.disabledItems = [];
    this.ulminWidth = 140;
    this.ulminHeight = 25;
    this.userOptions = {
        maxWidth: 500,
        maxHeight: 400,
        translations: { "all": "All", "items": "items","selectAll":"Select All","clearAll":"Clear All"},
        search: false,
        placeHolder: "",
		stayOpen:false,
        disableSelectAll: false,
    }
    if (options) {
        if (options.maxWidth != undefined) {
            this.userOptions.maxWidth = options.maxWidth;
        }
        if (options.maxHeight != undefined) {
            this.userOptions.maxHeight = options.maxHeight;
        }
        if (options.translations != undefined) {
            for (var property in options.translations) {
                if (options.translations.hasOwnProperty(property)) {
                    if(this.userOptions.translations[property] ){
                        this.userOptions.translations[property] = options.translations[property];
                    }
                }
              }
        }
        if (options.placeHolder != undefined) {
            this.userOptions.placeHolder = options.placeHolder;
        }
        if (options.search != undefined) {
            this.search = options.search;
        }
		if (options.stayOpen != undefined) {
            this.userOptions.stayOpen = options.stayOpen;
        }
        if (options.disableSelectAll != undefined) {
            this.userOptions.disableSelectAll = options.disableSelectAll;
        }
    }

    this.closeOrder=function(){
        let self = this;
        if(!self.userOptions.stayOpen){
            self.drop.style.display = "none";
            if(self.search){
                self.inputBox.value = "";
                Array.prototype.slice.call(self.listElements).forEach(function (x) {
                   x.classList.remove("hide");
                });
            }
        }
    }

    this.init = function () {
        let self = this;
        this.root.style.display = "none";
        let already = document.getElementById("btn-group-" + self.domSelector);
        if (already) {
            already.remove();
        }
        this.main = document.createElement("div");
        this.root.parentNode.insertBefore(this.main, this.root.nextSibling);
        this.main.classList.add("vsb-main");
        this.main.setAttribute("id", "btn-group-" + this.domSelector);
        this.main.style.marginLeft = this.main.style.marginLeft;
        if(self.userOptions.stayOpen){
            this.main.style.minHeight =  (this.userOptions.maxHeight+10) + "px";
        }

        let btnTag = self.userOptions.stayOpen ? "div" : "button";
        this.button = document.createElement(btnTag);

        this.main.appendChild(this.button);
        this.title = document.createElement("span");
        this.button.appendChild(this.title);
        this.title.classList.add("title");
        let caret = document.createElement("span");
        this.button.appendChild(caret);

        caret.classList.add("caret");
        caret.style.position = "absolute";
        caret.style.right = "8px";
        caret.style.marginTop = "8px";

		if(self.userOptions.stayOpen){
			caret.style.display = "none";
			this.title.style.paddingLeft = "20px";
			this.title.style.fontStyle = "italic";
			this.title.style.verticalAlign = "20%";
        }

        this.drop = document.createElement("div");
        this.main.appendChild(this.drop);
        this.drop.classList.add("vsb-menu");
        this.drop.style.zIndex = 2000 - this.instanceOffset;
        this.ul = document.createElement("ul");
        this.drop.appendChild(this.ul);

        this.ul.style.maxHeight = this.userOptions.maxHeight + "px";
        this.ul.style.minWidth = this.ulminWidth + "px";
        this.ul.style.minHeight = this.ulminHeight + "px";
        if (this.isMultiple) {
            this.ul.classList.add("multi");
            if (!self.userOptions.disableSelectAll) {
                let selectAll = document.createElement("option");
                selectAll.setAttribute("value", 'all');
                selectAll.innerText = self.userOptions.translations.selectAll;
                this.root.insertBefore(selectAll,(this.root.hasChildNodes())
                  ? this.root.childNodes[0]
                  : null);
            }
        }
        let selectedTexts = ""
        let sep = "";
        let nrActives = 0;

        if (this.search) {
            this.searchZone = document.createElement("div");
            this.ul.appendChild(this.searchZone);
            this.searchZone.classList.add("vsb-js-search-zone");
            this.searchZone.style.zIndex = 2001 - this.instanceOffset;
            this.inputBox = document.createElement("input");
            this.searchZone.appendChild(this.inputBox);
            this.inputBox.setAttribute("type", "text");
            this.inputBox.setAttribute("id", "search_" + this.domSelector);

            let fontSizeForP = this.isMultiple ? "12px" : "6px";
            var para = document.createElement("p");
            this.ul.appendChild(para);
            para.style.fontSize = fontSizeForP;
            para.innerHTML = "&nbsp;";
            this.ul.addEventListener("scroll", function (e) {
                var y = this.scrollTop;
                self.searchZone.parentNode.style.top = y + "px";
            });
        }

        this.options = document.querySelectorAll(this.domSelector + " > option");
        Array.prototype.slice.call(this.options).forEach(function (x) {
            let text = x.textContent;
            let value = x.value;
            let classes = x.getAttribute("class");
            if(classes)
            {
                classes=classes.split(" ");
            }
            else
            {
                classes=[];
            }
            let li = document.createElement("li");
            let isSelected = x.hasAttribute("selected");
          let isDisabled = x.hasAttribute("disabled");
            self.ul.appendChild(li);
            li.setAttribute("data-value", value);
            li.setAttribute("data-text", text);
            if (classes.length != 0) {
                classes.forEach(function(x){
                    li.classList.add(x);
                });

            }
            if (isSelected) {
                nrActives++;
                selectedTexts += sep + text;
                sep = ",";
                li.classList.add("active");
                if (!self.isMultiple) {
                    self.title.textContent = text;
                    if (classes.length != 0) {
                        classes.forEach(function(x){
                            self.title.classList.add(x);
                        });
                    }
                }
            }
          if(isDisabled){
            li.classList.add("disabled");
          }
            li.appendChild(document.createTextNode(text));
        });

        if (document.querySelector(this.domSelector + ' optgroup') !== null) {
            this.options = document.querySelectorAll(this.domSelector + " option");
            let groups = document.querySelectorAll(this.domSelector + ' optgroup');
            Array.prototype.slice.call(groups).forEach(function(group) {
                let groupOptions = group.querySelectorAll('option');
                let li = document.createElement("li");
                li.classList.add('grouped-option');
                li.appendChild(document.createTextNode(group.label));
                self.ul.appendChild(li);

                Array.prototype.slice.call(groupOptions).forEach(function(x) {
                    let text = x.textContent;
                    let value = x.value;
                    let classes = x.getAttribute("class");
                    if(classes)
                    {
                        classes=classes.split(" ");
                    }
                    else
                    {
                        classes=[];
                    }
                    let li = document.createElement("li");
                    let isSelected = x.hasAttribute("selected");
                    self.ul.appendChild(li);
                    li.setAttribute("data-value", value);
                    li.setAttribute("data-text", text);
                    if (classes.length != 0) {
                        classes.forEach(function(x){
                            li.classList.add(x);
                        });

                    }
                    if (isSelected) {
                        nrActives++;
                        selectedTexts += sep + text;
                        sep = ",";
                        li.classList.add("active");
                        if (!self.isMultiple) {
                            self.title.textContent = text;
                            if (classes.length != 0) {
                                classes.forEach(function(x){
                                    self.title.classList.add(x);
                                });
                            }
                        }
                    }
                    li.appendChild(document.createTextNode(text));
                })
            })
        }

        if (self.multipleSize != -1) {
            if (nrActives > self.multipleSize) {
                let wordForItems = self.userOptions.translations.items || "items"
                selectedTexts = nrActives + " " + wordForItems;
            }
        }
        if (self.isMultiple) {
            self.title.innerHTML = selectedTexts;
        }
        if (self.userOptions.placeHolder != "" && self.title.textContent == "") {
            self.title.textContent = self.userOptions.placeHolder;
        }
        this.listElements = this.drop.querySelectorAll("li:not(.grouped-option)");
        if (self.search) {
            self.inputBox.addEventListener("keyup", function (e) {
                let searchValue = e.target.value.toUpperCase();
                let searchValueLength = searchValue.length;
                if (searchValueLength < 2) {
                    Array.prototype.slice.call(self.listElements).forEach(function (x) {
                        x.classList.remove("hidden-search");
                    });
                } else {
                    Array.prototype.slice.call(self.listElements).forEach(function (x) {
                        let text = x.getAttribute("data-text").toUpperCase();
                        if (text.indexOf(searchValue) == -1
                          && x.getAttribute('data-value') !== 'all'
                        ) {
                            x.classList.add("hidden-search");
                        } else {
                            x.classList.remove("hidden-search");
                        }
                    });
                }
            });
        }

		if(self.userOptions.stayOpen){
            self.drop.style.display = "block";
			self.drop.style.boxShadow = "none";
			self.drop.style.minHeight =  (this.userOptions.maxHeight+10) + "px";
			self.drop.style.position = "relative";
			self.drop.style.left = "0px";
			self.drop.style.top = "0px";
			self.button.style.border = "none";
		}else{
			this.main.addEventListener("click", function (e) {
				if (self.isDisabled) return;
                    self.drop.style.left = self.left + "px";
                    self.drop.style.top = self.top + "px";
                    self.drop.style.display = "block";
                    document.addEventListener("click", docListener);
                    e.preventDefault();
                    e.stopPropagation();
                    if(!self.userOptions.stayOpen ){
                        VSBoxCounter.closeAllButMe(self.instanceOffset);
                    }
				});
		}
        this.drop.addEventListener("click", function (e) {
            if (self.isDisabled) return;

            if (!e.target.hasAttribute("data-value")) {
                e.preventDefault();
                e.stopPropagation();
                return;
            }
            let choiceValue = e.target.getAttribute("data-value");
            let choiceText = e.target.getAttribute("data-text");
            let className = e.target.getAttribute("class");

            if (choiceValue === 'all') {
                if (e.target.hasAttribute('data-selected')
                  && e.target.getAttribute('data-selected') === 'true') {
                    self.setValue([])
                    e.target.innerText = self.userOptions.translations.selectAll;
                    e.target.setAttribute('data-selected', 'false')
                } else {
                    let allValues = []
                    e.target.innerText = self.userOptions.translations.clearAll;
                    Array.prototype.slice.call(self.listElements).forEach(function (x) {
                        if (x.hasAttribute('data-value')
                          && x.getAttribute('data-value') !== 'all'
                          && !x.classList.contains('hidden-search')
                          && !x.classList.contains('disabled')) {
                            allValues.push(x.getAttribute('data-value'))
                        }
                    });
                    e.target.setAttribute('data-selected', 'true')
                    self.setValue(allValues)
                    e.target.classList.add("active");
                }
                return;
            }

            if(className &&className.indexOf("disabled") != -1){
                return;
            }
            if (!self.isMultiple) {
                self.root.value = choiceValue;
                self.title.textContent = choiceText;
                if (className) {
                    self.title.setAttribute("class", className + " title");
                } else {
                    self.title.setAttribute("class", "title");
                }
                Array.prototype.slice.call(self.listElements).forEach(function (x) {
                    x.classList.remove("active");
                });
                if (choiceText != "") {
                    e.target.classList.add("active");
                }
                self.privateSendChange();
                if(!self.userOptions.stayOpen){
                    docListener();
                }
            } else {
                let wasActive = false;
                if (className) {
                    wasActive = className.indexOf("active") != -1;
                }
                if (wasActive) {
                    e.target.classList.remove("active");
                } else {
                    e.target.classList.add("active");
                }
                let selectedTexts = ""
                let sep = "";
                let nrActives = 0;
                let nrAll = 0;
                for (let i = 0; i < self.options.length; i++) {
                    nrAll++;
                    if (self.options[i].value == choiceValue) {
                        self.options[i].selected = !wasActive;
                    }
                    if (self.options[i].selected) {
                        nrActives++;
                        selectedTexts += sep + self.options[i].textContent;
                        sep = ",";
                    }
                }
                if (nrAll == nrActives) {
                    let wordForAll = self.userOptions.translations.all || "all";
                    selectedTexts = wordForAll;
                } else if (self.multipleSize != -1) {
                    if (nrActives > self.multipleSize) {
                        let wordForItems = self.userOptions.translations.items || "items"
                        selectedTexts = nrActives + " " + wordForItems;
                    }
                }
                self.title.textContent = selectedTexts;
                self.privateSendChange();
            }
            e.preventDefault();
            e.stopPropagation();
            if (self.userOptions.placeHolder != "" && self.title.textContent == "") {
                self.title.textContent = self.userOptions.placeHolder;
            }
        });
        function docListener() {
            document.removeEventListener("click", docListener);
            self.drop.style.display = "none";
            if(self.search){
                self.inputBox.value = "";
                Array.prototype.slice.call(self.listElements).forEach(function (x) {
                    x.classList.remove("hidden-search");
                });
            }
        }
    }
    this.init();
}

vanillaSelectBox.prototype.disableItems = function (values) {
    let self = this;
    let foundValues = [];
    if (vanillaSelectBox_type(values) == "string") {
        values = values.split(",");
    }

    if(vanillaSelectBox_type(values) == "array"){
        Array.prototype.slice.call(self.options).forEach(function (x) {
            if (values.indexOf(x.value) != -1) {
                foundValues.push(x.value);
                x.setAttribute("disabled","");
            }
        });
    }
    Array.prototype.slice.call(self.listElements).forEach(function (x) {
        let val = x.getAttribute("data-value");
        if (foundValues.indexOf(val) != -1) {
            x.classList.add("disabled");
        }
    });
}

vanillaSelectBox.prototype.keepInstances = function (rootId) {
    let instanceIds;


}

vanillaSelectBox.prototype.enableItems = function (values) {
    let self = this;
    let foundValues = [];
    if (vanillaSelectBox_type(values) == "string") {
        values = values.split(",");
    }

    if(vanillaSelectBox_type(values) == "array"){
        Array.prototype.slice.call(self.options).forEach(function (x) {
            if (values.indexOf(x.value) != -1) {
                foundValues.push(x.value);
                x.removeAttribute("disabled");
            }
        });
    }

    Array.prototype.slice.call(self.listElements).forEach(function (x) {
        if (foundValues.indexOf(x.getAttribute("data-value")) != -1) {
            x.classList.remove("disabled");
        }
    });
}

    vanillaSelectBox.prototype.setValue = function (values) {
		let self = this;
        if (values == null || values == undefined || values == "") {
            self.empty();
        } else {
            if (self.isMultiple) {
                if (vanillaSelectBox_type(values) == "string") {
                    if (values == "all") {
                        values = [];
                        Array.prototype.slice.call(self.options).forEach(function (x) {
                            values.push(x.value);
                        });
                    } else {
                        values = values.split(",");
                    }
                }
                let foundValues = [];
                if (vanillaSelectBox_type(values) == "array") {
                    Array.prototype.slice.call(self.options).forEach(function (x) {
                        if (values.indexOf(x.value) != -1) {
                            x.selected = true;
                            foundValues.push(x.value);
                        } else {
                            x.selected = false;
                        }
                    });
                    let selectedTexts = ""
                    let sep = "";
                    let nrActives = 0;
                    let nrAll = 0;
                    Array.prototype.slice.call(self.listElements).forEach(function (x) {
                        nrAll++;
                        if (foundValues.indexOf(x.getAttribute("data-value")) != -1) {
                            x.classList.add("active");
                            nrActives++;
                            selectedTexts += sep + x.getAttribute("data-text");
                            sep = ",";
                        } else {
                            x.classList.remove("active");
                        }
                    });
                    if (nrAll == nrActives) {
                        let wordForAll = self.userOptions.translations.all || "all";
                        selectedTexts = wordForAll;
                    } else if (self.multipleSize != -1) {
                        if (nrActives > self.multipleSize) {
                            let wordForItems = self.userOptions.translations.items || "items"
                            selectedTexts = nrActives + " " + wordForItems;
                        }
                    }
                    self.title.textContent = selectedTexts;
                    self.privateSendChange();
                }
            } else {
                let found = false;
                let text = "";
                let classNames = ""
                Array.prototype.slice.call(self.listElements).forEach(function (x) {
                    if (x.getAttribute("data-value") == values) {
                        x.classList.add("active");
                        found = true;
                        text = x.getAttribute("data-text")
                    } else {
                        x.classList.remove("active");
                    }
                });
                Array.prototype.slice.call(self.options).forEach(function (x) {
                    if (x.value == values) {
                        x.selected = true;
                        className = x.getAttribute("class");
                        if (!className) className = "";
                    } else {
                        x.selected = false;
                    }
                });
                if (found) {
                    self.title.textContent = text;
                    if (self.userOptions.placeHolder != "" && self.title.textContent == "") {
                        self.title.textContent = self.userOptions.placeHolder;
                    }
                    if (className != "") {
                        self.title.setAttribute("class", className + " title");
                    } else {
                        self.title.setAttribute("class", "title");
                    }
                }
            }
        }
    }

vanillaSelectBox.prototype.privateSendChange = function () {
    let event = document.createEvent('HTMLEvents');
    event.initEvent('change', true, false);
    this.root.dispatchEvent(event);

}

	vanillaSelectBox.prototype.empty = function () {
        Array.prototype.slice.call(this.listElements).forEach(function (x) {
            x.classList.remove("active");
        });
        Array.prototype.slice.call(this.options).forEach(function (x) {
            x.selected = false;
        });
        this.title.textContent = "";
        if (this.userOptions.placeHolder != "" && this.title.textContent == "") {
            this.title.textContent = this.userOptions.placeHolder;
        }
        this.privateSendChange();
    }

    vanillaSelectBox.prototype.destroy = function () {
        let already = document.getElementById("btn-group-" + this.domSelector);
        if (already) {
            VSBoxCounter.remove(this.instanceOffset);
            already.remove();
            this.root.style.display = "inline-block";
        }
    }
    vanillaSelectBox.prototype.disable = function () {
        let already = document.getElementById("btn-group-" + this.domSelector);
        if (already) {
            button = already.querySelector("button")
			if(button) button.classList.add("disabled");
            this.isDisabled = true;
        }
    }
    vanillaSelectBox.prototype.enable = function () {
        let already = document.getElementById("btn-group-" + this.domSelector);
        if (already) {
            button = already.querySelector("button")
            if(button) button.classList.remove("disabled");
            this.isDisabled = false;
        }
    }

vanillaSelectBox.prototype.showOptions = function(){
    console.log(this.userOptions);
}
// Polyfills for IE
if (!('remove' in Element.prototype)) {
    Element.prototype.remove = function () {
        if (this.parentNode) {
            this.parentNode.removeChild(this);
        }
    };
}

function vanillaSelectBox_type(target) {
    const computedType = Object.prototype.toString.call(target);
    const stripped = computedType.replace("[object ", "").replace("]", "");
    const lowercased = stripped.toLowerCase();
    return lowercased;
}
</script>

<style>

body {
    margin:50px;
    font-family:'Arial', sans-serif;
}
*{margin:0;padding: 0;}

h1 {
    color:#FA9A39;
}

p { padding-bottom:50px;}

.content {
    width:500px;
    margin:auto;
}
.tree ul {
    margin-left: 20px;
}

.tree li {
    list-style-type: none;
    margin:10px;
    position: relative;
}

.tree li::before {
    content: "";
    position: absolute;
    top:-7px;
    left:-20px;
    border-left: 1px solid #ccc;
    border-bottom:1px solid #ccc;
    border-radius:0 0 0 0px;
    width:20px;
    height:15px;
}

.tree li::after {
    position:absolute;
    content:"";
    top:8px;
    left:-20px;
    border-left: 1px solid #ccc;
    border-top:1px solid #ccc;
    border-radius:0px 0 0 0;
    width:20px;
    height:100%;
}

.tree li:last-child::after  {
    display:none;
}

.tree li:last-child:before{
    border-radius: 0 0 0 5px;
}

ul.tree>li:first-child::before {
    display:none;
}

ul.tree>li:first-child::after {
    border-radius:5px 0 0 0;
}

.tree li a {
    border: 1px #ccc solid;
    border-radius: 5px;
    padding:2px 5px;
}

.tree li a:hover, .tree li a:hover+ul li a,
.tree li a:focus, .tree li a:focus+ul li a {
    background: #ccc; color: #000; border: 1px solid #000;
}

.tree li a:hover+ul li::after, .tree li a:focus+ul li::after,
.tree li a:hover+ul li::before, .tree li a:focus+ul li::before 
.tree li a:hover+ul::before, .tree li a:focus+ul::before 
.tree li a:hover+ul ul::before, .tree li a:focus+ul ul::before{
    border-color:  #000; /*connector color on hover*/
}


  .hidden-search {
	display: none !important;
}

.vsb-menu{
  cursor:pointer;
  z-index:1000;
  display:none;
  position:absolute;/*Don't change*/
  border:1px solid #B2B2B2;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0,0,0,.15);
  box-shadow: 0 6px 12px rgba(0,0,0,.175);
  border-radius:4px;
  font-size : 11px;
}

.vsb-js-search-zone{
	position:absolute;/*Don't change*/
    z-index:1001;
	width: 80%;
	min-height:1.8em;
	padding: 2px;
	background-color: #fff;
}

.vsb-js-search-zone input{
	border: 1px solid grey;
	margin-left: 2px;
	width: 96%;
	border-radius: 4px;
	height: 25px !important;
}

.vsb-main{
	position: relative;/*Don't change*/
	display: inline-block;
	vertical-align: middle;
	text-align:left;
}

.vsb-menu li{
	display: list-item;
	font-size: 12px;
	background-color: #fff;
	min-height:1.4em;
	padding: 0.2em;
}

.vsb-menu li:hover {
	background: linear-gradient(#f5f5f5, #e8e8e8);
}

.vsb-menu ul{
	user-select:none;
	list-style:none;
	white-space: nowrap;
	margin:0px;
	margin-top:4px;
	padding-left:10px;
	padding-right:10px;
	padding-bottom:3px;
	color: #333;
	cursor:pointer;
	overflow-y:auto;
}

li.disabled{
	cursor:not-allowed;
	opacity:0.3;
	background-color: #999;
}

.vsb-main button{
	min-width: 120px;
	border-radius: 0;
	width: 100%;
	text-align: left;
	z-index: 1;
	color: #333;
	background: white !important;
	border: 1px solid #999 !important;
	/* line-height:20px; */
	font-size:12px;
	/* padding:6px 12px; */
}

.vsb-main button.disabled{
	cursor:not-allowed;
	opacity:0.65;
}

.vsb-main .title {
	margin-right: 6px;
	user-select:none;
}

.vsb-main li:hover {
	background: linear-gradient(#f5f5f5, #e8e8e8);
}

.vsb-main ul{
	white-space: nowrap;
}

.vsb-menu li {
	font-size: 14px;
	background-color: #fff;
	min-height:1.4em;
	padding: 0.2em 2em 0.2em 1em;
}

.vsb-menu li.grouped-option {
	font-weight: bold;
	font-size: 15px;
	padding-left: 5px;
}

.vsb-menu :not(.multi) li.active::before {
	content: "";
	display: inline-block;
	font-size: inherit;
	float:left;
	margin-left:-16px;
	transform: rotate(45deg);
	height: 10px;
	width:  5px;
	border-bottom:  3px solid black;
	border-right:  3px solid black;
	border-radius:2px;
}

.vsb-menu .multi li {
	font-size: 14px;
	background-color: #fff;
	min-height:1.4em;
	padding: 0.2em 2em 0.2em 26px;
}

.vsb-menu .multi li.grouped-option {
	font-weight: bold;
	font-size: 15px;
	padding-left: 5px;
}

.vsb-menu .multi li:not(.grouped-option)::before{
	content: "";
	display: inline-block;
	font-size: inherit;
	float:left;
	font-weight:bold;
	margin-left:-22px;
	margin-right:2px;
	border : 1px solid;
	border-radius : 3px;
	padding : 7px;
	margin-top:2px;
	color:black;
}

.vsb-menu .multi li.active::after {
	content: "";
	display: inline-block;
	font-size: inherit;
	color: #333;
	float:left;
	margin-left:-18px;
	display: inline-block;
	transform: rotate(45deg);
	margin-top:2px;
	height: 10px;
	width:  6px;
	border-bottom: 3px solid black;
	border-right:  3px solid black;
}

.caret {
	display: inline-block;
	width: 0;
	height: 0;
	margin-left: 2px;
	vertical-align: middle;
	border-top: 4px dashed;
	border-top: 4px solid;
	border-right: 4px solid transparent;
	border-left: 4px solid transparent;
}

</style>


<!-- 日历的css -->
<style>
.simplepicker-wrapper{position:fixed;top:0;left:0;overflow:auto;background-color:#4c4c4c7d;width:100vw;height:100vh;display:none}.simplepicker-wrapper.active{display:block}.simpilepicker-date-picker{width:326px;cursor:auto;font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:14px;background-color:#fff;margin:2% auto;box-shadow:1px 2px 4px .5px rgba(0,0,0,.22),1px 2px 4px .5px transparent}.simplepicker-day-header{color:#fff;background-color:#016565;text-align:center;padding:4px 0}.simplepicker-date-section{text-align:center;background-color:#078e8e;color:#fff}.simplepicker-date-section .simplepicker-month-and-year{font-size:22px;padding:14px 0 7px;font-weight:200}.simplepicker-date-section .simplepicker-date{font-size:35px;padding:2px;margin-bottom:12px}.simplepicker-select-pane{display:flex;width:100%}.simplepicker-select-pane .simplepicker-time,.simplepicker-selected-date{text-align:center;flex:2}.simplepicker-icon,.simplepicker-selected-date,.simplepicker-time{border:none;background:transparent;padding:2px;margin:4px 6px;width:25px;height:25px;opacity:.5}.simplepicker-selected-date,.simplepicker-time{opacity:1}.simplepicker-month-switcher{margin-top:5px}.simplepicker-icon:hover{opacity:.8}.simplepicker-icon.active,.simplepicker-icon:active{opacity:1}.simplepicker-icon:focus{outline:none}.simplepicker-icon-next{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1hcnJvdy1yaWdodCI+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiPjwvbGluZT48cG9seWxpbmUgcG9pbnRzPSIxMiA1IDE5IDEyIDEyIDE5Ij48L3BvbHlsaW5lPjwvc3ZnPg==)}.simplepicker-icon-previous{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1hcnJvdy1sZWZ0Ij48bGluZSB4MT0iMTkiIHkxPSIxMiIgeDI9IjUiIHkyPSIxMiI+PC9saW5lPjxwb2x5bGluZSBwb2ludHM9IjEyIDE5IDUgMTIgMTIgNSI+PC9wb2x5bGluZT48L3N2Zz4=)}.simplepicker-icon-calender{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1jYWxlbmRhciI+PHJlY3QgeD0iMyIgeT0iNCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiByeD0iMiIgcnk9IjIiPjwvcmVjdD48bGluZSB4MT0iMTYiIHkxPSIyIiB4Mj0iMTYiIHkyPSI2Ij48L2xpbmU+PGxpbmUgeDE9IjgiIHkxPSIyIiB4Mj0iOCIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEwIiB4Mj0iMjEiIHkyPSIxMCI+PC9saW5lPjwvc3ZnPg==)}.simplepicker-icon-time{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1jbG9jayI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiPjwvY2lyY2xlPjxwb2x5bGluZSBwb2ludHM9IjEyIDYgMTIgMTIgMTYgMTQiPjwvcG9seWxpbmU+PC9zdmc+)}.simplepicker-bottom-part{padding-top:6px;padding-bottom:12px;padding-left:48%}.simplepicker-calender table{width:100%;font-size:13px}.simplepicker-calender thead th{font-weight:400;font-size:15px;padding-bottom:6px;width:14.28%;height:30px;text-align:center}.simplepicker-calender tbody td{position:relative;text-align:center;vertical-align:middle;padding:12px;z-index:1}.simplepicker-calender tbody td:after{content:" ";visibility:hidden;display:block;position:absolute;left:50%;top:50%;height:35px;width:35px;border-radius:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,.05)}.simplepicker-calender tbody td:hover:after{visibility:visible}.simplepicker-calender tbody td.active,.simplepicker-calender tbody td:active{color:#fff}.simplepicker-calender tbody .active:after,.simplepicker-calender tbody td:active:after{visibility:visible;background-color:teal;z-index:-1}.simplepicker-calender tbody td[data-empty]{pointer-events:none}.simplepicker-time-section{display:none;height:120px}.simplepicker-time-section input{box-sizing:border-box;width:120px;height:32px;max-width:120px;max-height:32px;padding:4px 3px;border:none;border-bottom:2px solid #ccc;font-size:14px;font-family:Verdana,Geneva,Tahoma,sans-serif;display:block;margin:25% auto}.simplepicker-time-section input:focus{outline:none;border-bottom-color:teal}.simplepicker-picker-section{width:100%;height:auto}.simplepicker-btn{border:none;background:transparent;font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:16px;padding:7px 14px;border:1px solid #ddd;margin:0 5px;border-color:#016565;color:#016565;font-size:13px}.simplepicker-btn:active,.simplepicker-btn:hover{color:#fff;background-color:#016565}.simplepicker-fade{color:hsla(0,0%,88%,.95)}.simplepicker-btn,.simplepicker-icon,.simplepicker-wrapper{cursor:pointer}
/*# sourceMappingURL=simplepicker.css.map*/
</style>


</head> 




<body>
  <div class="content" id="everydaytree">
  <div>
    <h1>Urgent tasks</h1>
    <ul class="tree">
      <li><a>发布新的gtd网页版本</a></li>
    </ul>
</div>
<div id="todaytree">
  <h1>Today tasks</h1>
</div>

</div>
  <div id="everyday">
    
  </div>
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- 这是一个项目的div，里面有任务列表和添加任务一系列的html文件 -->

  <!-- 项目名称 -->
  <div class="section">
    <header class="project_area">
      <h1>这里是项目名称</h1>
    </header>

    <!-- 已经输入的任务，下面是正常显示任务时使用的html -->

    <ul class="items">
      <!-- 下面是已经添加完任务的html，每个任务用一个li标签 -->
      <li>
        <div class="task_list_item">
          <!-- 任务完成的圆圈 -->
          <div class="task_list_item_task_area">
            <div class="container">
              <div class="round">
                <input type="checkbox" id="checkbox" />
                <label for="checkbox" id="chekboxlabel"></label>
              </div>
            </div>
            <!-- 单独一个任务的html -->
            <div class="task_list_content">
              <span type="text" name="" id="tempid" class="task_list_item_input">这里是已经创建的任务 </span>
            </div>
          </div>
          <!-- 任务下面的日期 -->
          <div class="task_list_item_date_area">
            <span class="task_list_item_date_button">这里是日期</span>
          </div>
        </div>
      </li>

     

      <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
      <!-- 下面是添加任务时使用的html，里面仅包含一个li标签 -->   
      <li id="add_task_item">
        <div class="add_task_area" id="add_task" >
          <div class="input_task_area">
            <!-- onclick="test(this.getAttribute('id'))" -->
            <!-- onclick 指的是鼠标指上去，并不是点上去 -->
            <!-- 这里最输入任务的框，里面有各种需要传的参数 -->
            <!-- 设置输入任务的div -->
            <div class="container">
            <!-- <label class="input-task-class"    id="inputlabel">please input your task</label> -->
            <!-- 这一个input的位置出现了问题，原因就是使用了form标签，一点击就会重新刷新页面，去掉就好了，-->
            <input class="input_text" type="text" id="noid" placeholder="please input your task" >
            <!-- <button id="nonoid">点击添加task</button> -->
            <!-- <input id="testbutton"  placeholder="please input your task"> -->
            </div>
            
            <div class="task_property_area">
              <div class="calendar_project_area">
                <div class="calendar_area" id="calendar_area">
                  <!-- 输入任务时间的表单 -->
                  <!-- <a>请输任务时间</a> -->
                  <button id="calendar" class="clock_button">
                    <svg t="1598153562536" class="icon" 
                    viewBox="0 0 1024 1024" version="1.1" 
                    xmlns="http://www.w3.org/2000/svg" 
                    p-id="3498" width="20" height="20">
                      <path d="M106.666667 810.666667V298.666667h810.666666v512c0 46.933333-38.4 85.333333-85.333333 85.333333H192c-46.933333 0-85.333333-38.4-85.333333-85.333333z" 
                      fill="#CFD8DC" p-id="3499">
                      </path>
                      <path d="M917.333333 213.333333v128H106.666667v-128c0-46.933333 38.4-85.333333 85.333333-85.333333h640c46.933333 0 85.333333 38.4 85.333333 85.333333z" 
                      fill="#F44336" p-id="3500"></path><path d="M704 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3501">
        
                      </path>
                      <path d="M320 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3502"></path><path d="M704 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667zM320 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667z" fill="#B0BEC5" p-id="3503">
        
                      </path><path d="M277.333333 426.666667h85.333334v85.333333h-85.333334zM405.333333 426.666667h85.333334v85.333333h-85.333334zM533.333333 426.666667h85.333334v85.333333h-85.333334zM661.333333 426.666667h85.333334v85.333333h-85.333334zM277.333333 554.666667h85.333334v85.333333h-85.333334zM405.333333 554.666667h85.333334v85.333333h-85.333334zM533.333333 554.666667h85.333334v85.333333h-85.333334zM661.333333 554.666667h85.333334v85.333333h-85.333334zM277.333333 682.666667h85.333334v85.333333h-85.333334zM405.333333 682.666667h85.333334v85.333333h-85.333334zM533.333333 682.666667h85.333334v85.333333h-85.333334zM661.333333 682.666667h85.333334v85.333333h-85.333334z" fill="#90A4AE" p-id="3504">
        
                      </path>
                    </svg>
                  </button>
                  <!-- <label id="inputlabel">please input your plantime</label>
                  <input type="text" id="plantime" > -->
                </div>
      
                <div id="project_area">
                  <!-- 任务的选择需要使用带层级标签的下拉列表 -->
                  <!-- <a>project select</a> -->
                  <label for="project_choose"></label>
                  <select name="project_choose" id="project_choose">
                    <option value="inbox">inbox</option>
                    <option value="work">work</option>
                    <option value="family">family</option>
                  </select>
                </div>
              </div>
      
              <div id="tags_review_area" class="tags_review_area">
                <div id="tasktags_area">
                  <!-- 选择标签，需要使用multi-selector  -->
                  <!-- <label for="tasktag">tasktag:</label> -->
                  <select name="tasktag" id="tasktag_selector"  >
                    <option value="ub">输入标签</option>
                    <option value="IM">重要的</option>;
                    <option value="HA">困难的</option>;
                    <option value="UR">紧急的</option>;
                  </select>
                </div>
      
                <div id="reviewalgo_area">
                  <!-- 评价任务的窗口，和选择标签一样，都需要multi-secector  -->
                  <div id="task_reviewalgo_area">
                    <select name="taskreview" id="taskreview_selector" >
                      <option value="ub">输入回顾</option>
                      <option value="ub">使用大脑</option>
                      <option value="atom">原子化拆分</option>
                      <option value="diff">困难的事情</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
      
            <div>
              <!-- 输入标签的input窗口 -->
              <!-- <label id="tasktags" >please choose the tasktags</label> -->
              <!-- <input type="text" id="tags" placeholder="please choose the tasktags"/> -->
            </div>
      
            <div>
              <!-- 输入review的input窗口 -->
              <!-- <label id="reivew">please choose thd reviewalgo</label> -->
              <!-- <input type="text" id="reviewalgo" placeholder="please choose thd reviewalgo" /> -->
            </div>
          </div>
            <div class="add_task_button_area">
              <button class="add_task_button">添加任务</button>
              <button class="cancel_add_task_button">取消</button>
            </div>
        </div>
      </li>
      
      <!-- 这是一个Add按键，用来把添加任务的div放进去 -->
      <li id="add_task_button_area">
        <!-- <button id="plusbutton" class="plusbutton">this is a plus</button> -->
        <input type="button" name="plus" id="plusbutton" class="plusbutton" value="+">
      </li>
    </ul>
  </div>



  
  


 
        <!-- <style>
        .taskwrite div{
            display: inline-block;
          }
        </style> -->

    
        <!-- <svg 
        t="1598151010848" 
        class="icon" 
        viewBox="0 0 1024 1024" 
        version="1.1" 
        xmlns="http://www.w3.org/2000/svg" 
        p-id="2596" 
        width="20" 
        height="20"
        >
          <path d="M512 128C300.256 128 128 300.256 128 512s172.256 384 384 384 384-172.256 384-384S723.744 128 512 128z m0 64c177.12 0 320 142.88 320 320s-142.88 320-320 320S192 689.12 192 512 334.88 192 512 192z m-32 64v288h224v-64h-160V256z" p-id="2597">
          </path>
        </svg> -->
        <!-- 用的是阿里巴巴矢量图库里的svg -->
<!-- </li> -->


<!-- <button id="test_post">test the post function</button> -->

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- 下面是脚本文件，最后要做分离的 -->



<script type="text/javascript">

function updatetask(id){
  // alert(`我正在输出checkbox 的 ID ${id}`)

  // var updatedtask = $("#updatedtask").val()
      var taskid = id.substring(8, 13)
      // alert(taskid)

      var updatedinfo =
      // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
      {
        'ifdissect': 'no',
        'deadline': 'unspecified',
        'starttime': 'unspecified',
        'endtime': 'unspecified',
        'tasktagsorigin': 'unspecified',
        'parentid': 'unspecified',
        'timedevotedto_a_task': 0,
        'goalcode': 'xxx',
        'client': 'gtdcli',
        'taglight': 'no',
        'note': 'unspecified',
        'reviewalgolight': 'no',
        'reviewalgo': {},
        'parentproject': 'unspecified',
        'id': taskid,
        'place': 'unspecified',
        'finishtime': 'unspecified',
        'inbox': 'nocontent',
        'project': 'inbox',
        'plantime': 'today',
        'taskstatus': 'finished',
        'tasktags': {}
      }

      $.ajax({
        type: "POST",
        url: "/v1/update",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify(updatedinfo),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { 
          geteverydaytask();
          // alert(data);
         },
        failure: function (errMsg) {
          alert(errMsg);
        }
      })
    }


// alert( "Handler for .click() called." );
      // 下面的代码用来判断任务是否完成
      // var reviewalgo = updatedinfo.reviewalgo;
      // var search = "yes"
      // console.log(reviewalgo);
      // // if ( Object.keys(reviewalgo).length == 0) 
      // if (inArray(search, reviewalgo)) {
      //   updatedinfo.taskstatus = "finished";
      //   console.log(updatedinfo);
      // }
      // else {
      //   alert("请先对任务进行评价才能点击完成按钮哦~");
      //   // return false;
      //   event.preventDefault();
      //   // 阻止click动作之后默认的操作
      // }




window.onload = function() {
  var input = document.querySelector('#g01-01');
  if (input) {   
    input.addEventListener('change', doalert, false);
  }
}

function geteverydaytask(){

  $.get("/v1/todayjson", function(data, status){
    // alert("Data: " + data + "\nStatus: " + status);
    console.log(data.task);
    var div = document.getElementById('todaytree');
    div.innerHTML = ""
    var  alltask=''
    var tasks = data.task
    // div.innerHTML += '<li>this is  a task<li>';
      var i = 0
      var head = '<h1>Today tasks</h1><ul class="tree">'
       var  tail = '</ul>'
       var  alltask = ''
      //  var task_id = task[i].id
      while (i<data.task.length)
    {
      // <input type="checkbox" name="checkfield" id="g01-01"  onchange="doalert(this.id)"/>
      var addedtask_head = `<div class="task_list_item">  <div class="task_list_item_task_area"> <div class="container"> <div class="round2"> <input type="checkbox" id= "checkbox${tasks[i].ID}" onchange="updatetask(this.id)" /> <label for="checkbox" id="chekboxlabel"></label> </div> </div> <div class="task_list_content"> `
      var addedtask_body = '<span type="text" name="" id=  class="task_list_item_input">这里是已经创建的任务 </span> '
      var addedtask_trail = '</div> </div> <div class="task_list_item_date_area"> <span class="task_list_item_date_button">这里是日期</span> </div> </div>'
      
      alltask=alltask+ `<li id = ${tasks[i].ID}>` + addedtask_head + "<a>" + tasks[i].task + "</a>" + addedtask_trail + "</li>";
    i++;
}
div.innerHTML += head+alltask+tail

  });
}

geteverydaytask()




window.onload = function(){
$("#tempid").click(function(){

  var content = "任务1";
  var task_content = document.getElementById("tempid");
  task_content.firstChild.nodeValue = content;
})



var add_task_item = document.getElementById("add_task_item");
// console.log(add_task_item);

$("#plusbutton").click(function(){

  var add_plus = document.getElementById("add_task_button_area");

  console.log(add_plus);

  const add_task_div = '<div class="add_task_area" id="add_task" > <div class="input_task_area"> <!-- onclick="test(this.getAttribute("id"))" --> <!-- onclick 指的是鼠标指上去，并不是点上去 --> <!-- 这里最输入任务的框，里面有各种需要传的参数 --> <!-- 设置输入任务的div --> <div class="container"> <!-- <label class="input-task-class" id="inputlabel">please input your task</label> --> <!-- 这一个input的位置出现了问题，原因就是使用了form标签，一点击就会重新刷新页面，去掉就好了，--> <input class="input_text" type="text" id="noid" placeholder="please input your task" > <!-- <button id="nonoid">点击添加task</button> --> <!-- <input id="testbutton" placeholder="please input your task"> --> </div> <div class="task_property_area"> <div class="calendar_project_area"> <div class="calendar_area" id="calendar_area"> <!-- 输入任务时间的表单 --> <!-- <a>请输任务时间</a> --> <button id="calendar" class="clock_button"> <svg t="1598153562536" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3498" width="20" height="20"> <path d="M106.666667 810.666667V298.666667h810.666666v512c0 46.933333-38.4 85.333333-85.333333 85.333333H192c-46.933333 0-85.333333-38.4-85.333333-85.333333z" fill="#CFD8DC" p-id="3499"> </path> <path d="M917.333333 213.333333v128H106.666667v-128c0-46.933333 38.4-85.333333 85.333333-85.333333h640c46.933333 0 85.333333 38.4 85.333333 85.333333z" fill="#F44336" p-id="3500"></path><path d="M704 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3501"> </path> <path d="M320 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3502"></path><path d="M704 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667zM320 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667z" fill="#B0BEC5" p-id="3503"> </path><path d="M277.333333 426.666667h85.333334v85.333333h-85.333334zM405.333333 426.666667h85.333334v85.333333h-85.333334zM533.333333 426.666667h85.333334v85.333333h-85.333334zM661.333333 426.666667h85.333334v85.333333h-85.333334zM277.333333 554.666667h85.333334v85.333333h-85.333334zM405.333333 554.666667h85.333334v85.333333h-85.333334zM533.333333 554.666667h85.333334v85.333333h-85.333334zM661.333333 554.666667h85.333334v85.333333h-85.333334zM277.333333 682.666667h85.333334v85.333333h-85.333334zM405.333333 682.666667h85.333334v85.333333h-85.333334zM533.333333 682.666667h85.333334v85.333333h-85.333334zM661.333333 682.666667h85.333334v85.333333h-85.333334z" fill="#90A4AE" p-id="3504"> </path> </svg> </button> <!-- <label id="inputlabel">please input your plantime</label> <input type="text" id="plantime" > --> </div> <div id="project_area"> <!-- 任务的选择需要使用带层级标签的下拉列表 --> <!-- <a>project select</a> --> <label for="project_choose"></label> <select name="project_choose" id="project_choose"> <option value="inbox">inbox</option> <option value="work">work</option> <option value="family">family</option> </select> </div> </div> <div id="tags_review_area" class="tags_review_area"> <div id="tasktags_area"> <!-- 选择标签，需要使用multi-selector --> <!-- <label for="tasktag">tasktag:</label> --> <select name="tasktag" id="tasktag_selector" > <option value="ub">输入标签</option> <option value="IM">重要的</option>; <option value="HA">困难的</option>; <option value="UR">紧急的</option>; </select> </div> <div id="reviewalgo_area"> <!-- 评价任务的窗口，和选择标签一样，都需要multi-secector --> <div id="task_reviewalgo_area"> <select name="taskreview" id="taskreview_selector" > <option value="ub">输入回顾</option> <option value="ub">使用大脑</option> <option value="atom">原子化拆分</option> <option value="diff">困难的事情</option> </select> </div> </div> </div> </div> <div> <!-- 输入标签的input窗口 --> <!-- <label id="tasktags" >please choose the tasktags</label> --> <!-- <input type="text" id="tags" placeholder="please choose the tasktags"/> --> </div> <div> <!-- 输入review的input窗口 --> <!-- <label id="reivew">please choose thd reviewalgo</label> --> <!-- <input type="text" id="reviewalgo" placeholder="please choose thd reviewalgo" /> --> </div> </div> <div class="add_task_button_area"> <button class="add_task_button">添加任务</button> <button class="cancel_add_task_button">取消</button> </div> </div>'

  add_plus.innerHTML += add_task_div;

  document.getElementById("plusbutton").outerHTML = "";

})

  // const nospecifiedtaskdivcode =

    var taskid_div = "noid";

    //  define a inital tasktags
    var tasktags = {
      'importanttag': 'no',
      'feartag': 'no',
      'principletag': 'no',
      'atomtag': 'no',
      'dfstag': 'no',
      'hardtag': 'no',
      'easytag': 'no',
      'urgenttag': 'no',
      'challengetag': 'no',
      'uncomfortabletag': 'no',
      'troublesometag': 'no',
      'keyproblemtag': 'no',
      'tenminutestasktag': 'no',
      'thirtyminutestasktag': 'no',
      'threeminutestasktag': 'no'
    }

    // define a inital reviewalgo
    var reviewalgo = {
      'attackactively': 'no',
      'makeuseofthings': 'no',
      'depthfirstsearch': 'no',
      'markataskimmediately': 'no',
      'alwaysprofit': 'no',
      'brainuse': 'no',
      'useprinciple': 'no',
      'patience': 'no',
      'solveakeyproblem': 'no',
      'learnnewthings': 'no',
      'battlewithlowerbrain': 'no',
      'difficultthings': 'no',
      'acceptfactandseektruth': 'no',
      'dealwithahardtask': 'no',
      'threeminutes': 'no',
      'serviceforgoal': 'no',
      'buildframeandprinciple': 'no',
      'atomadifficulttask': 'no',
      'noflinch': 'no',
      'learntechuse': 'no',
      'doanimportantthingearly': 'no',
      'acceptpain': 'no',
      'conquerthefear': 'no'
    }


    //  添加日期的组件
    function yyyymmdd(dateIn) {
      var yyyy = dateIn.getFullYear();
      var mm = dateIn.getMonth() + 1; // getMonth() is zero-based
      var dd = dateIn.getDate();
      var timereturn = String(10000 * yyyy + 100 * mm + dd);
      var finaltime = timereturn.substring(2, 8)
      return finaltime
      // Leading zeros for mm and dd
    }

    // 把日期传入的js代码
    // var today = new Date();
    // console.log(yyyymmdd(today));

    var plantime = "unspecified"

    // $("#calendar").click(function () 
    
    $(document).on("click","#calendar",function()
    
    {
      
      let myPicker = new SimplePicker();

      myPicker.open();
      myPicker.on('submit', function (date, readableDate) {
        // alert(date);
        plantime = yyyymmdd(date)
        // alert("ma is here!!!!!!!!!!!")
        // alert(plantime)
        // plantime = conver
        // alert(readableDate)
      })
      // alert("ma is here")
      myPicker.on('close', function (date) {
        // ...
      })
      // myPicker.close()
    })

    // 输入任务的标签组件
    // var temtags = ['重要', '害怕', '原则','原子化','dfs','困难','容易','紧急','挑战','麻烦事','主要问题', '10分钟', '3分钟', '30分钟']


    // 更新标签的函数
    function updatetags(elem) {
      for (let i = 0; i < elem.length; i++) {
        // const element = array[i];
        //  alert("the first for");
        for (let j = 0; j < Object.keys(tasktags).length; j++) {
          // const element = array[j];
          // alert("the second for");
          if (elem[i] == Object.keys(tasktags)[j]) {
            tasktags[elem[i]] = 'yes';
          }
        }
        console.log("tag更新成功")
        // alert(tasktags)
      };
      return tasktags;
    }

    // 更新评价的函数
    function updatereviewalgo(elem) {
      for (let i = 0; i < elem.length; i++) {
        // const element = array[i];
        //  alert("the first for");
        for (let j = 0; j < Object.keys(reviewalgo).length; j++) {
          // const element = array[j];
          // alert("the second for");
          if (elem[i] == Object.keys(reviewalgo)[j]) {
            reviewalgo[elem[i]] = 'yes';
          }
        }
        console.log("reviewalgo更新成功")
        // alert(tasktags)
      };
      return reviewalgo;
    }

    var tagscovert = {
      "importanttag": "重要的",
      'feartag': "害怕的",
      'principletag': "原则",
      'atomtag': "原子",
      'dfstag': "dfstag",
      'hardtag': "困难的",
      'easytag': "容易的",
      'urgenttag': "急迫的",
      'challengetag': "挑战的",
      'uncomfortabletag': "不舒服的",
      'troublesometag': "麻烦事",
      'keyproblemtag': "关键问题",
      'tenminutestasktag': "10分钟",
      'thirtyminutestasktag': "30分钟",
      'threeminutestasktag': "3分钟",
    }

    var tagscovert = {
      "importanttag": "重要的",
      'feartag': "害怕的",
      'principletag': "原则",
      'atomtag': "原子",
      'dfstag': "dfstag",
      'hardtag': "困难的",
      'easytag': "容易的",
      'urgenttag': "急迫的",
      'challengetag': "挑战的",
      'uncomfortabletag': "不舒服的",
      'troublesometag': "麻烦事",
      'keyproblemtag': "关键问题",
      'tenminutestasktag': "10分钟",
      'thirtyminutestasktag': "30分钟",
      'threeminutestasktag': "3分钟",
    }


    // 标签的输入

    $("#tags").inputTags({
      autocomplete: {
        values: [
          '重要的',
          'feartag',
          'principletag',
          'atomtag',
          'dfstag',
          'hardtag',
          'easytag',
          'urgenttag',
          'challengetag',
          'uncomfortabletag',
          'troublesometag',
          'keyproblemtag',
          'tenminutestasktag',
          'thirtyminutestasktag',
          'threeminutestasktag'
        ],
        only: true
      },

      // max: 3,

      // create: function() {
      //     console.log('Tag added !');
      // },

      init: function ($elem) {
        // console.log('Event called on plugin init', $elem);
        tasktags = updatetags($elem.tags);
      },

      create: function ($elem) {
        console.log('Event called when an item is created', $elem);
        // alert($elem.tags)
        // alert("hellohellohello");
        // console.log(tasktags);
        // console.log($elem.tags);
        tasktags = updatetags($elem.tags);
        console.log(tasktags);
      },

      update: function ($elem) {
        console.log('Event called when an item is updated', $elem);
        tasktags = updatetags($elem.tags);
      },

      destroy: function ($elem) {
        console.log('Event called when an item is deleted', $elem);
        tasktags = updatetags($elem.tags);
      },

      selected: function ($elem) {
        console.log('Event called when an item is selected', $elem);
        tasktags = updatetags($elem.tags);
      },

      unselected: function ($elem) {
        console.log('Event called when an item is unselected', $elem);
        tasktags = updatetags($elem.tags);
      },

      change: function ($elem) {
        console.log('Event called on item change', $elem);
        tasktags = updatetags($elem.tags);
      },

      autocompleteTagSelect: function ($elem) {
        console.log('Event called on tag selection', $elem);
        tasktags = updatetags($elem.tags);
      }
    }
    );
    // review的选择输入

    $("#reviewalgo").inputTags({
      autocomplete: {
        values: [
          'attackactively',
          'makeuseofthings',
          'depthfirstsearch',
          'markataskimmediately',
          'alwaysprofit',
          'brainuse',
          'useprinciple',
          'patience',
          'solveakeyproblem',
          'learnnewthings',
          'battlewithlowerbrain',
          'difficultthings',
          'acceptfactandseektruth',
          'dealwithahardtask',
          'threeminutes',
          'serviceforgoal',
          'buildframeandprinciple',
          'atomadifficulttask',
          'noflinch',
          'learntechuse',
          'doanimportantthingearly',
          'acceptpain',
          'conquerthefear'
        ],
        only: true
      },
      // max: 3,

      // create: function() {
      //     console.log('Tag added !');
      // },

      init: function ($elem) {
        // console.log('Event called on plugin init', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      create: function ($elem) {
        // console.log('Event called when an item is created', $elem);
        // alert($elem.tags)
        // alert("hellohellohello");
        // console.log(tasktags);
        // console.log($elem.tags);
        reviewalgo = updatereviewalgo($elem.tags);
        console.log(reviewalgo);
      },

      update: function ($elem) {
        console.log('Event called when an item is updated', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      destroy: function ($elem) {
        console.log('Event called when an item is deleted', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      selected: function ($elem) {
        console.log('Event called when an item is selected', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      unselected: function ($elem) {
        console.log('Event called when an item is unselected', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      change: function ($elem) {
        console.log('Event called on item change', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      },

      autocompleteTagSelect: function ($elem) {
        console.log('Event called on tag selection', $elem);
        reviewalgo = updatereviewalgo($elem.tags);
      }
    }
    );

    // for (var i = 0; i < tasktags.length; i++) {
    //         // const element = array[i];
    //         if($elem[i]= Object.keys(tasktags)[i]){
    //           tasktags[i] = $elem[i];
    //         }
    //           alert("tasktags")
    //     };

    // 下面是输入任务的JS代码

    // $("#testbutton").keypress(function(event){
    //   if(event.key === "Enter"){
    //     $.get("/v1/test", function(data, status){
    //       alert("Data: " + data + "\nStatus: " + status);
    //     });
    //   }
  
    // });
    
// $("#test_post").click(function(){
//   alert("why so  gaoxiao!!!!")
// })
$("#test_post").click(function(){

 
        // alert("点击");
        console.log("ma is here")
        //var task1 = {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'we ar', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Fri Aug 21 22:38:23 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}

        // 下面这行代码把在Input里输入的内容传入到inputedtask这个变量里
        var inputedtask = $("#noid").val();
        // var inputedtask = document.getElementById("createtask").getAttribute("placeholder");
        // console.log(inputedtask);
        // alert(inputedtask);
        // var plantime =  $("#plantime").val()
        // alert(inputedtask)
        //  alert("检查plantime")
        //  alert(plantime)
        var testis = "ma is here";
        var task =
        // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}

        {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'create the task', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Mon Aug 31 23:23:35 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}
        //  {
        //   'starttime': 'unspecified',
        //   'deadline': 'unspecified',
        //   'endtime': 'unspecified',
        //   'ifdissect': 'no',
        //   'note': 'unspecified',
        //   'parentid': 'unspecified',
        //   'timedevotedto_a_task': 0,
        //   'client': 'gtdcli',
        //   'goalcode': 'aaa',
        //   'parentproject': 'unspecified',
        //   'inboxlist': 'empty',
        //   'inbox': inputedtask,
        //   'finishtime': 'unspecified',
        //   'reviewalgolight': 'no',
        //   'reviewalgo': "unspecified",
        //   'place': 'unspecified',
        //   'input-time': 'Fri Aug 21 22:38:23 2020',
        //   'project': 'inbox',
        //   'taskstatus': 'unfinished',
        //   'plantime': '200831',
        //   'taglight': 'yes',
        //   'tasktags': "unspecified",
        //   'tasktagsorigin': 'e'
        // };
        ;
        console.log(task);
        // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}


        $.ajax({
          type: "POST",
          url: "/v1/createtask",
          // The key needs to match your method's input parameter (case-sensitive).
          data: JSON.stringify(task),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (data) {
            // var taskid = data.taskid
            // $("#thisnode").setproperty("taskid")=taskid
            // <p taskid=1544>
            // alert(data);
            var taskid = data.taskid;
            // alert(taskid);
            const taskdom = document.querySelector("#tempid")
            console.log(taskdom);
            taskdom.setAttribute("taskid", taskid);
            taskdom.setAttribute("id", taskid);

            // console.log(data);
          },
          failure: function (errMsg) {
            alert(errMsg);
          }
          //  alert(errMsg);
        })
      
    
})





    
    // $("#noid").keypress(function (event)
    $(document).on("keypress","#noid",function(event)
    {

      if (event.key === "Enter") {
       
        // alert("点击回车");
        console.log("ma is here")
        //var task1 = {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'we ar', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Fri Aug 21 22:38:23 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}

        // 下面这行代码把在Input里输入的内容传入到inputedtask这个变量里
        var inputedtask = $("#noid").val();
        // var inputedtask = document.getElementById("createtask").getAttribute("placeholder");
        // console.log(inputedtask);
        // alert(inputedtask);
        // var plantime =  $("#plantime").val()
        // alert(inputedtask)
        //  alert("检查plantime")
        //  alert(plantime)
        var testis = "ma is here";
        var task = {
          'starttime': 'unspecified',
          'deadline': 'unspecified',
          'endtime': 'unspecified',
          'ifdissect': 'no',
          'note': 'unspecified',
          'parentid': 'unspecified',
          'timedevotedto_a_task': 0,
          'client': 'gtdcli',
          'goalcode': 'aaa',
          'parentproject': 'unspecified',
          'inboxlist': 'empty',
          'inbox': inputedtask,
          'finishtime': 'unspecified',
          'reviewalgolight': 'no',
          'reviewalgo': reviewalgo,
          'place': 'unspecified',
          'input-time': 'Fri Aug 21 22:38:23 2020',
          'project': 'inbox',
          'taskstatus': 'unfinished',
          'plantime': plantime,
          'taglight': 'yes',
          'tasktags': tasktags,
          'tasktagsorigin': 'e'
        };
        console.log(task);
        // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}


        $.ajax({
          type: "POST",
          url: "/v1/createtask",
          // The key needs to match your method's input parameter (case-sensitive).
          data: JSON.stringify(task),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (data) {
            // var taskid = data.taskid
            // $("#thisnode").setproperty("taskid")=taskid
            // <p taskid=1544>
              geteverydaytask()
            // alert(data);
            console.log("i am printing the return data from server")
            console.log(data)
            var taskid = data.taskid;
            // alert(taskid);
            const taskdom = document.querySelector("#tempid")
            console.log(taskdom);
            // taskdom.setAttribute("taskid", taskid);
            taskdom.setAttribute("id", taskid);

            // console.log(data);
          },
          failure: function (errMsg) {
            alert(errMsg);
          }
          //  alert(errMsg);
        })
      }
    });





    // 这是更新任务的JS代码

    // 这里使用的是回调函数的taskinfo，而不是自己凭空创建的
    var updatedinfo =
    // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
    {
      'ifdissect': 'no',
      'deadline': 'unspecified',
      'starttime': 'unspecified',
      'endtime': 'unspecified',
      'tasktagsorigin': 'unspecified',
      'parentid': 'unspecified',
      'timedevotedto_a_task': 0,
      'goalcode': 'xxx',
      'client': 'gtdcli',
      'taglight': 'no',
      'note': 'unspecified',
      'reviewalgolight': 'no',
      'reviewalgo': { "123": "" },
      'parentproject': 'unspecified',
      'id': "unspecified",
      'place': 'unspecified',
      'finishtime': 'unspecified',
      'inbox': 'unspecified',
      'project': 'inbox',
      'plantime': 'today',
      'taskstatus': 'unfinished',
      'tasktags': {}
    }


    // 下面的函数用来判断一个字典里面是否含有某个value
    function inArray(search, array) {
      for (var i in array) {
        if (array[i] == search) {
          return true;
        }
      }
      return false;
    }

    // 点击checkbox将会执行的event
    
    $("#checkbox_box").click(function (event) {
      
      // alert("You have to evaluate the task before finish it")
      // return false;
    }
    );




    $("#updatetask").click(function () {


      //var task1 = {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'we ar', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Fri Aug 21 22:38:23 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}

      var updatedtask = $("#updatedtask").val()
      var taskid = $("#taskid").val()
      alert(taskid)

      var updatedinfo =
      // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
      {
        'ifdissect': 'no',
        'deadline': 'unspecified',
        'starttime': 'unspecified',
        'endtime': 'unspecified',
        'tasktagsorigin': 'unspecified',
        'parentid': 'unspecified',
        'timedevotedto_a_task': 0,
        'goalcode': 'xxx',
        'client': 'gtdcli',
        'taglight': 'no',
        'note': 'unspecified',
        'reviewalgolight': 'no',
        'reviewalgo': {},
        'parentproject': 'unspecified',
        'id': taskid,
        'place': 'unspecified',
        'finishtime': 'unspecified',
        'inbox': updatedtask,
        'project': 'inbox',
        'plantime': 'today',
        'taskstatus': 'unfinished',
        'tasktags': {}
      }





      $.ajax({
        type: "POST",
        url: "/v1/update",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify(updatedinfo),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { alert(data); },
        failure: function (errMsg) {
          alert(errMsg);
        }
      })
    })

}

</script>
   
     
 


</body>

</html>