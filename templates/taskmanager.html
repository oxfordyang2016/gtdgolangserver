<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">


<title>beautiful dream</title>

<link rel="stylesheet" href="/v1/taskmanage.css">

<link rel="icon" href="https://photosfor2018.oss-cn-hangzhou.aliyuncs.com/dreamforfuture.png">  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">

<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900'>
<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Montserrat:400,700'>
<link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
<!-- <link rel="stylesheet" href="/v1/user.css"> -->
<!-- 上面的css中包含背景，给注释掉了，这样就不显示背景了 -->




<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<!-- <script  src="/v1/index.js"></script> -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="https://test-1255367272.cos.ap-chengdu.myqcloud.com/inputtag.js"></script>

<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->

<!-- 下面是日历的脚本 -->
<script>
  var SimplePicker=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}({0:function(e,t,i){i("iyB0"),e.exports=i("TYVf")},"0DyV":function(e,t,i){"use strict";function n(e,t){e=[].concat(e);for(var i=0;i<t;i++)e[i]=void 0;return e}function r(e){var i=new Date(e.getTime()),r=e.getFullYear(),s=e.getMonth(),a={date:i,month:void 0};if(t.monthTracker.current=new Date(e.getTime()),t.monthTracker.current.setDate(1),t.monthTracker.years[r]=t.monthTracker.years[r]||{},void 0!==t.monthTracker.years[r][s])return a.month=t.monthTracker.years[r][s],a;(e=new Date(e.getTime())).setDate(1),t.monthTracker.years[r][s]=[];for(var c=t.monthTracker.years[r][s],o=0;e.getMonth()===s;){var l=e.getDate(),p=e.getDay();1===l&&(c[o]=n([],p)),c[o]=c[o]||[],c[o][p]=l,6===p&&o++,e.setDate(e.getDate()+1)}var d=5;void 0===c[5]&&(d=4,c[5]=n([],7));var m=c[d].length;if(m<7){var h=c[d].concat(n([],7-m));c[d]=h}return a.month=c,a}Object.defineProperty(t,"__esModule",{value:!0}),t.monthTracker={years:{}},t.months=["January","February","March","April","May","June","July","August","September","October","November","December"],t.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.scrapeMonth=r,t.scrapePreviousMonth=function(){var e=t.monthTracker.current;if(!e)throw Error("scrapePrevoisMonth called without setting monthTracker.current!");return e.setMonth(e.getMonth()-1),r(e)},t.scrapeNextMonth=function(){var e=t.monthTracker.current;if(!e)throw Error("scrapePrevoisMonth called without setting monthTracker.current!");return e.setMonth(e.getMonth()+1),r(e)};var s={st:[1,21,31],nd:[2,22],rd:[3,23]};t.getDisplayDate=function(e){var t=e.getDate();return-1!==s.st.indexOf(t)?t+"st":-1!==s.nd.indexOf(t)?t+"nd":-1!==s.rd.indexOf(t)?t+"rd":t+"th"},t.formatTimeFromInputElement=function(e){var t="",i=e.split(":"),n=i[0],r=(n=+n)>=12;return r&&n>12&&(n-=12),r||0!==n||(n=12),t+=n<10?"0"+n:n,t+=":"+i[1]+" ",t+=r?"PM":"AM"}},TYVf:function(e,t,i){"use strict";var n=i("0DyV"),r=i("ht6X"),s=new Date,a=function(){function e(e,t){var i;if("object"==typeof e&&(t=e,i=void 0),"string"==typeof(i=i||"body")&&(i=document.querySelector(i)),!i)throw new Error("SimplePicker: Valid selector or element must be passed!");t||(t={}),this.selectedDate=new Date,this.$simplepicker=i,this.initElMethod(i),this.injectTemplate(),this.init(t),this.initListeners(),this._eventHandlers={},this._validOnListeners=["submit","close"]}return e.prototype.initElMethod=function(e){this.$=function(t){return e.querySelector(t)},this.$$=function(t){return e.querySelectorAll(t)}},e.prototype.init=function(e){var t=this.$,i=this.$$;this.$simplepicker=t(".simpilepicker-date-picker"),this.$simplepickerWrapper=t(".simplepicker-wrapper"),this.$trs=i(".simplepicker-calender tbody tr"),this.$tds=i(".simplepicker-calender tbody td"),this.$headerMonthAndYear=t(".simplepicker-month-and-year"),this.$monthAndYear=t(".simplepicker-selected-date"),this.$date=t(".simplepicker-date"),this.$day=t(".simplepicker-day-header"),this.$time=t(".simplepicker-time"),this.$timeInput=t(".simplepicker-time-section input"),this.$timeSectionIcon=t(".simplepicker-icon-time"),this.$cancel=t(".simplepicker-cancel-btn"),this.$ok=t(".simplepicker-ok-btn"),this.$displayDateElements=[this.$day,this.$headerMonthAndYear,this.$date],this.$time.classList.add("simplepicker-fade"),this.render(n.scrapeMonth(s)),e=e||{},this.opts=e,this.reset(s),void 0!==e.zIndex&&(this.$simplepickerWrapper.style.zIndex=e.zIndex.toString()),e.disableTimeSection&&this.disableTimeSection(),e.compactMode&&this.compactMode()},e.prototype.reset=function(e){var t=e||new Date;this.render(n.scrapeMonth(t));var i=t.getDate().toString(),r=this.findElementWithDate(i);r.classList.contains("active")||(this.selectDateElement(r),this.updateDateComponents(t));var s=t.toTimeString().split(" ")[0].replace(/\:\d\d$/,"");this.$timeInput.value=s,this.$time.innerText=n.formatTimeFromInputElement(s)},e.prototype.compactMode=function(){this.$date.style.display="none"},e.prototype.disableTimeSection=function(){this.$timeSectionIcon.style.visibility="hidden"},e.prototype.enableTimeSection=function(){this.$timeSectionIcon.style.visibility="visible"},e.prototype.injectTemplate=function(){var e=document.createElement("template");e.innerHTML=r.htmlTemplate,this.$simplepicker.appendChild(e.content.cloneNode(!0))},e.prototype.clearRows=function(){this.$tds.forEach(function(e){e.innerHTML="",e.classList.remove("active")})},e.prototype.updateDateComponents=function(e){var t=n.days[e.getDay()],i=n.months[e.getMonth()]+" "+e.getFullYear();this.$headerMonthAndYear.innerHTML=i,this.$monthAndYear.innerHTML=i,this.$day.innerHTML=t,this.$date.innerHTML=n.getDisplayDate(e)},e.prototype.render=function(e){var t=this.$$,i=this.$trs,n=e.month,r=e.date;this.clearRows(),n.forEach(function(e,t){var n=i[t].children;e.forEach(function(e,t){var i=n[t];e?(i.removeAttribute("data-empty"),i.innerHTML=e):i.setAttribute("data-empty","")})});var s=t("table tbody tr:last-child td"),a=!0;s.forEach(function(e){void 0===e.dataset.empty&&(a=!1)});var c=s[0].parentElement;c.style.display=a&&c?"none":"table-row",this.updateDateComponents(r)},e.prototype.updateSelectedDate=function(e){var t,i=this.$monthAndYear,r=this.$time;this.$date;t=e?e.innerHTML.trim():this.$date.innerHTML.replace(/[a-z]+/,"");var s=i.innerHTML.split(" "),a=s[0],c=s[1],o=n.months.indexOf(a),l=r.innerHTML.split(":"),p=+l[0],d=l[1].split(" "),m=d[0],h=d[1];"AM"===h&&12==p&&(p=0),"PM"===h&&p<12&&(p+=12);var u=new Date(+c,+o,+t,+p,+m);this.selectedDate=u;var v=t+" ";v+=i.innerHTML.trim()+" ",v+=r.innerHTML.trim(),this.readableDate=v.replace(/^\d+/,u.getDate().toString())},e.prototype.selectDateElement=function(e){var t=this.$(".simplepicker-calender tbody .active");e.classList.add("active"),t&&t.classList.remove("active"),this.updateSelectedDate(e),this.updateDateComponents(this.selectedDate)},e.prototype.findElementWithDate=function(e,t){var i,n;return void 0===t&&(t=!1),this.$tds.forEach(function(t){var r=t.innerHTML.trim();r===e&&(i=t),""!==r&&(n=t)}),void 0===i&&t&&(i=n),i},e.prototype.handleIconButtonClick=function(e){var t,i=this.$;if(e.classList.contains("simplepicker-icon-calender")){var r=i(".simplepicker-icon-time"),s=i(".simplepicker-time-section");return(c=i(".simplepicker-calender-section")).style.display="block",s.style.display="none",r.classList.remove("active"),e.classList.add("active"),void this.toogleDisplayFade()}if(e.classList.contains("simplepicker-icon-time")){var a=i(".simplepicker-icon-calender"),c=i(".simplepicker-calender-section");return(s=i(".simplepicker-time-section")).style.display="block",c.style.display="none",a.classList.remove("active"),e.classList.add("active"),void this.toogleDisplayFade()}var o=i(".simplepicker-calender td.active");if(o&&(t=o.innerHTML.trim()),e.classList.contains("simplepicker-icon-next")&&this.render(n.scrapeNextMonth()),e.classList.contains("simplepicker-icon-previous")&&this.render(n.scrapePreviousMonth()),t){var l=this.findElementWithDate(t,!0);this.selectDateElement(l)}},e.prototype.initListeners=function(){var e=this,t=e.$simplepicker,i=e.$timeInput,r=e.$ok,s=e.$cancel,a=e.$simplepickerWrapper,c=this;function o(){c.close(),c.callEvent("close",function(e){e()})}t.addEventListener("click",function(e){var t=e.target,i=t.tagName.toLowerCase();e.stopPropagation(),"td"!==i?"button"===i&&t.classList.contains("simplepicker-icon")&&c.handleIconButtonClick(t):c.selectDateElement(t)}),i.addEventListener("input",function(e){if(""!==e.target.value){var t=n.formatTimeFromInputElement(e.target.value);c.$time.innerHTML=t,c.updateSelectedDate()}}),r.addEventListener("click",function(){c.close(),c.callEvent("submit",function(e){e(c.selectedDate,c.readableDate)})}),s.addEventListener("click",o),a.addEventListener("click",o)},e.prototype.callEvent=function(e,t){(this._eventHandlers[e]||[]).forEach(function(e){t(e)})},e.prototype.open=function(){this.$simplepickerWrapper.classList.add("active")},e.prototype.close=function(){this.$simplepickerWrapper.classList.remove("active")},e.prototype.on=function(e,t){var i=this._validOnListeners,n=this._eventHandlers;if(!i.includes(e))throw new Error("Not a valid event!");n[e]=n[e]||[],n[e].push(t)},e.prototype.toogleDisplayFade=function(){this.$time.classList.toggle("simplepicker-fade"),this.$displayDateElements.forEach(function(e){e.classList.toggle("simplepicker-fade")})},e}();e.exports=a},ht6X:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.htmlTemplate='\n<div class="simplepicker-wrapper">\n  <div class="simpilepicker-date-picker">\n    <div class="simplepicker-day-header"></div>\n      <div class="simplepicker-date-section">\n        <div class="simplepicker-month-and-year"></div>\n        <div class="simplepicker-date"></div>\n        <div class="simplepicker-select-pane">\n          <button class="simplepicker-icon simplepicker-icon-calender active" title="Select date from calender!"></button>\n          <div class="simplepicker-time">12:00 PM</div>\n          <button class="simplepicker-icon simplepicker-icon-time" title="Select time"></button>\n        </div>\n      </div>\n      <div class="simplepicker-picker-section">\n        <div class="simplepicker-calender-section">\n          <div class="simplepicker-month-switcher simplepicker-select-pane">\n            <button class="simplepicker-icon simplepicker-icon-previous"></button>\n            <div class="simplepicker-selected-date"></div>\n            <button class="simplepicker-icon simplepicker-icon-next"></button>\n          </div>\n          <div class="simplepicker-calender">\n            <table>\n              <thead>\n                <tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>\n              </thead>\n              <tbody>\n                '+function(e,t){for(var i="",n=1;n<=t;n++)i+=e;return i}("<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>",6)+'\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class="simplepicker-time-section">\n          <input type="time" value="12:00" autofocus="false">\n        </div>\n      </div>\n      <div class="simplepicker-bottom-part">\n        <button class="simplepicker-cancel-btn simplepicker-btn" title="Cancel">Cancel</button>\n        <button class="simplepicker-ok-btn simplepicker-btn" title="OK">OK</button>\n      </div>\n  </div>\n</div>\n'},iyB0:function(e,t,i){}});
// #sourceMappingURL=simplepicker.js.map


</script>





<!-- 日历的css -->
<style>
.simplepicker-wrapper{position:fixed;top:0;left:0;overflow:auto;background-color:#4c4c4c7d;width:100vw;height:100vh;display:none}.simplepicker-wrapper.active{display:block}.simpilepicker-date-picker{width:326px;cursor:auto;font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:14px;background-color:#fff;margin:2% auto;box-shadow:1px 2px 4px .5px rgba(0,0,0,.22),1px 2px 4px .5px transparent}.simplepicker-day-header{color:#fff;background-color:#016565;text-align:center;padding:4px 0}.simplepicker-date-section{text-align:center;background-color:#078e8e;color:#fff}.simplepicker-date-section .simplepicker-month-and-year{font-size:22px;padding:14px 0 7px;font-weight:200}.simplepicker-date-section .simplepicker-date{font-size:35px;padding:2px;margin-bottom:12px}.simplepicker-select-pane{display:flex;width:100%}.simplepicker-select-pane .simplepicker-time,.simplepicker-selected-date{text-align:center;flex:2}.simplepicker-icon,.simplepicker-selected-date,.simplepicker-time{border:none;background:transparent;padding:2px;margin:4px 6px;width:25px;height:25px;opacity:.5}.simplepicker-selected-date,.simplepicker-time{opacity:1}.simplepicker-month-switcher{margin-top:5px}.simplepicker-icon:hover{opacity:.8}.simplepicker-icon.active,.simplepicker-icon:active{opacity:1}.simplepicker-icon:focus{outline:none}.simplepicker-icon-next{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1hcnJvdy1yaWdodCI+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiPjwvbGluZT48cG9seWxpbmUgcG9pbnRzPSIxMiA1IDE5IDEyIDEyIDE5Ij48L3BvbHlsaW5lPjwvc3ZnPg==)}.simplepicker-icon-previous{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1hcnJvdy1sZWZ0Ij48bGluZSB4MT0iMTkiIHkxPSIxMiIgeDI9IjUiIHkyPSIxMiI+PC9saW5lPjxwb2x5bGluZSBwb2ludHM9IjEyIDE5IDUgMTIgMTIgNSI+PC9wb2x5bGluZT48L3N2Zz4=)}.simplepicker-icon-calender{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1jYWxlbmRhciI+PHJlY3QgeD0iMyIgeT0iNCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiByeD0iMiIgcnk9IjIiPjwvcmVjdD48bGluZSB4MT0iMTYiIHkxPSIyIiB4Mj0iMTYiIHkyPSI2Ij48L2xpbmU+PGxpbmUgeDE9IjgiIHkxPSIyIiB4Mj0iOCIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEwIiB4Mj0iMjEiIHkyPSIxMCI+PC9saW5lPjwvc3ZnPg==)}.simplepicker-icon-time{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1jbG9jayI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiPjwvY2lyY2xlPjxwb2x5bGluZSBwb2ludHM9IjEyIDYgMTIgMTIgMTYgMTQiPjwvcG9seWxpbmU+PC9zdmc+)}.simplepicker-bottom-part{padding-top:6px;padding-bottom:12px;padding-left:48%}.simplepicker-calender table{width:100%;font-size:13px}.simplepicker-calender thead th{font-weight:400;font-size:15px;padding-bottom:6px;width:14.28%;height:30px;text-align:center}.simplepicker-calender tbody td{position:relative;text-align:center;vertical-align:middle;padding:12px;z-index:1}.simplepicker-calender tbody td:after{content:" ";visibility:hidden;display:block;position:absolute;left:50%;top:50%;height:35px;width:35px;border-radius:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,.05)}.simplepicker-calender tbody td:hover:after{visibility:visible}.simplepicker-calender tbody td.active,.simplepicker-calender tbody td:active{color:#fff}.simplepicker-calender tbody .active:after,.simplepicker-calender tbody td:active:after{visibility:visible;background-color:teal;z-index:-1}.simplepicker-calender tbody td[data-empty]{pointer-events:none}.simplepicker-time-section{display:none;height:120px}.simplepicker-time-section input{box-sizing:border-box;width:120px;height:32px;max-width:120px;max-height:32px;padding:4px 3px;border:none;border-bottom:2px solid #ccc;font-size:14px;font-family:Verdana,Geneva,Tahoma,sans-serif;display:block;margin:25% auto}.simplepicker-time-section input:focus{outline:none;border-bottom-color:teal}.simplepicker-picker-section{width:100%;height:auto}.simplepicker-btn{border:none;background:transparent;font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:16px;padding:7px 14px;border:1px solid #ddd;margin:0 5px;border-color:#016565;color:#016565;font-size:13px}.simplepicker-btn:active,.simplepicker-btn:hover{color:#fff;background-color:#016565}.simplepicker-fade{color:hsla(0,0%,88%,.95)}.simplepicker-btn,.simplepicker-icon,.simplepicker-wrapper{cursor:pointer}
/*# sourceMappingURL=simplepicker.css.map*/
</style>

<style>
  body {
      margin:50px;
      font-family:'Arial', sans-serif;
  }
  *{margin:0;padding: 0;}
  
  h1 {
      color:#FA9A39;
  }
  
  p { padding-bottom:50px;}
  
  .content {
      width:500px;
      margin:auto;
  }
  .tree ul {
      margin-left: 20px;
  }
  
  .tree li {
      list-style-type: none;
      margin:10px;
      position: relative;
  }
  
  .tree li::before {
      content: "";
      position: absolute;
      top:-7px;
      left:-20px;
      border-left: 1px solid #ccc;
      border-bottom:1px solid #ccc;
      border-radius:0 0 0 0px;
      width:20px;
      height:15px;
  }
  
  .tree li::after {
      position:absolute;
      content:"";
      top:8px;
      left:-20px;
      border-left: 1px solid #ccc;
      border-top:1px solid #ccc;
      border-radius:0px 0 0 0;
      width:20px;
      height:100%;
  }
  
  .tree li:last-child::after  {
      display:none;
  }
  
  .tree li:last-child:before{
      border-radius: 0 0 0 5px;
  }
  
  ul.tree>li:first-child::before {
      display:none;
  }
  
  ul.tree>li:first-child::after {
      border-radius:5px 0 0 0;
  }
  
  .tree li a {
      border: 1px #ccc solid;
      border-radius: 5px;
      padding:2px 5px;
  }
  
  .tree li a:hover, .tree li a:hover+ul li a,
  .tree li a:focus, .tree li a:focus+ul li a {
      background: #ccc; color: #000; border: 1px solid #000;
  }
  
  .tree li a:hover+ul li::after, .tree li a:focus+ul li::after,
  .tree li a:hover+ul li::before, .tree li a:focus+ul li::before 
  .tree li a:hover+ul::before, .tree li a:focus+ul::before 
  .tree li a:hover+ul ul::before, .tree li a:focus+ul ul::before{
      border-color:  #000; /*connector color on hover*/
  }
  
</style>

<style>
  @import url(http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic);
  @import url(http://fonts.googleapis.com/css?family=Ubuntu+Condensed);
  /* * {
    box-sizing: border-box;
  } */
  .color {
    color: #19BC9C !important;
  }
  /* html,
  body {
    width: 100%;
    height: 100%;
    margin: 0;
    font-family: 'Ubuntu Condensed', sans-serif;
    background-color: #fff;
  }
  h1 {
    text-align: center;
    margin-bottom: 32px;
  } */
   div.container {
    display: block;
    width: 50%;
    margin: 32px auto;
    padding: 16px 32px;
    background-color: #fff;
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
  } 
  div.inputTags-list {
    display: inline-block;
    width: 100%;
    padding: 6px;
    border: 1px solid rgba(25, 188, 156, 0.35);
    background-color: #f9f9f9;
    box-shadow: 1px 2px 2px rgba(221, 221, 221, 0.2);
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
  }
  div.inputTags-list span.inputTags-item {
    position: relative;
    display: inline-block;
    margin: 2px;
    padding: 3px 22px 4px 8px;
    background-color: #19BC9C;
    text-align: center;
    color: #fff;
    opacity: 1;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
  }
  div.inputTags-list span.inputTags-item.is-edit {
    display: none;
  }
  div.inputTags-list span.inputTags-item.is-hidden {
    display: none !important;
  }
  div.inputTags-list span.inputTags-item.is-exists {
    background-color: rgba(231, 76, 60, 0.7);
  }
  div.inputTags-list span.inputTags-item span.value {
    cursor: pointer;
  }
  div.inputTags-list span.inputTags-item i {
    position: absolute;
    top: 50%;
    right: 6px;
    font-size: 20px;
    cursor: pointer;
    z-index: 10;
    font-weight: 400;
    font-family: sans-serif;
    line-height: 1;
    font-style: normal;
    -webkit-transition: color 0.2s;
    -khtml-transition: color 0.2s;
    -moz-transition: color 0.2s;
    -ms-transition: color 0.2s;
    -o-transition: color 0.2s;
    -webkit-transform: translateY(-50%);
    -khtml-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
  }
  div.inputTags-list span.inputTags-item i:hover {
    color: #e74c3c;
  }
  div.inputTags-list input.inputTags-field {
    border: none;
    margin-left: 4px;
    background-color: transparent;
  }
  div.inputTags-list input.inputTags-field:focus,
  div.inputTags-list input.inputTags-field:active {
    outline: none;
  }
  div.inputTags-list input.inputTags-field.is-edit {
    margin: 0 2px;
    padding: 4px 8px 3px 8px;
    border: 1px dashed #c4c4c4;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
  }
  div.inputTags-list ul.inputTags-autocomplete-list {
    position: absolute;
    max-height: 192px;
    margin: 0;
    padding: 0;
    list-style-type: none;
    background-color: #fff;
    border: 1px solid #ddd;
    overflow-y: auto;
    z-index: 100;
    opacity: 0;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    -webkit-transform: scaleY(0);
    -khtml-transform: scaleY(0);
    -moz-transform: scaleY(0);
    -ms-transform: scaleY(0);
    -o-transform: scaleY(0);
    -webkit-transform-origin: 50% 0;
    -khtml-transform-origin: 50% 0;
    -moz-transform-origin: 50% 0;
    -ms-transform-origin: 50% 0;
    -o-transform-origin: 50% 0;
    -webkit-transition-duration: 0.2s;
    -khtml-transition-duration: 0.2s;
    -moz-transition-duration: 0.2s;
    -ms-transition-duration: 0.2s;
    -o-transition-duration: 0.2s;
  }
  div.inputTags-list ul.inputTags-autocomplete-list.is-active {
    opacity: 1;
    -webkit-transform: scaleY(1);
    -khtml-transform: scaleY(1);
    -moz-transform: scaleY(1);
    -ms-transform: scaleY(1);
    -o-transform: scaleY(1);
  }
  div.inputTags-list ul.inputTags-autocomplete-list li {
    height: 32px;
    line-height: 32px;
    padding: 0 16px;
    cursor: pointer;
    border-bottom: 1px solid #ddd;
    -webkit-transition-duration: 0.3s;
    -khtml-transition-duration: 0.3s;
    -moz-transition-duration: 0.3s;
    -ms-transition-duration: 0.3s;
    -o-transition-duration: 0.3s;
    -webkit-transition-duration: 0.2s;
    -khtml-transition-duration: 0.2s;
    -moz-transition-duration: 0.2s;
    -ms-transition-duration: 0.2s;
    -o-transition-duration: 0.2s;
  }
  div.inputTags-list ul.inputTags-autocomplete-list li:last-child {
    border: none;
  }
  div.inputTags-list ul.inputTags-autocomplete-list li:hover {
    background-color: #19BC9C;
    color: #fff;
  }
  div.inputTags-list ul.inputTags-autocomplete-list li.is-disabled {
    cursor: default;
    background-color: #f7f7f7;
    color: initial;
  }
  p.inputTags-error {
    position: relative;
    margin: 0;
    padding: 0.5em 1em;
    color: #fff;
    background-color: rgba(231, 76, 60, 0.7);
    cursor: pointer;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
  }
  p.inputTags-error:first-of-type {
    margin-top: 8px;
  }
  p.inputTags-error:after {
    position: absolute;
    content: "\000D7";
    top: 50%;
    right: 0.5em;
    -webkit-transform: translateY(-50%);
    -khtml-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    font-size: 28px;
  }
</style>


</head> 

<body>
  
<div>
  <input type="text"  id="inputTags_d3" />
</div>  


  
<div class="content" id="everydaytree">
  <div>
    <h1>Urgent tasks</h1>
    <ul class="tree">
      <li><a>发布新的gtd网页版本</a></li>
    </ul>
</div>
<div id="todaytree">
  <h1>Today tasks</h1>
</div>

</div>
  <div id="everyday">
    
  </div>
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- 这是一个项目的div，里面有任务列表和添加任务一系列的html文件 -->

  <!-- 项目名称 -->
  <div class="section">
    <header class="project_area">
      <h1>这里是项目名称</h1>
    </header>

    <!-- 已经输入的任务，下面是正常显示任务时使用的html -->

    <ul class="items">
      <!-- 下面是已经添加完任务的html，每个任务用一个li标签 -->
      <li>
        <div class="task_list_item">
          <!-- 任务完成的圆圈 -->
          <div class="task_list_item_task_area">
            <div class="div_container" >
              <div class="round">
                <input type="checkbox" id="checkbox" />
                <label for="checkbox" id="chekboxlabel"></label>
              </div>
            </div>
            <!-- 单独一个任务的html -->
            <div class="task_list_content">
              <span type="text" name="" id="tempid" class="task_list_item_input">这里是已经创建的任务 </span>
            </div>
          </div>
          <!-- 任务下面的日期 -->
          <div class="task_list_item_date_area">
            <span class="task_list_item_date_button">这里是日期</span>
          </div>
        </div>
      </li>

     

      <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
      <!-- 下面是添加任务时使用的html，里面仅包含一个li标签 -->   
      <li id="add_task_item">
        <div class="add_task_area" id="add_task" >
          <div class="input_task_area">
            <!-- onclick="test(this.getAttribute('id'))" -->
            <!-- onclick 指的是鼠标指上去，并不是点上去 -->
            <!-- 这里最输入任务的框，里面有各种需要传的参数 -->
            <!-- 设置输入任务的div -->
            <div class="task_container">
            <!-- <label class="input-task-class"    id="inputlabel">please input your task</label> -->
            <!-- 这一个input的位置出现了问题，原因就是使用了form标签，一点击就会重新刷新页面，去掉就好了，-->
            <input class="input_text" type="text" id="noid" placeholder="please input your task" >
            <!-- <button id="nonoid">点击添加task</button> -->
            <!-- <input id="testbutton"  placeholder="please input your task"> -->
            </div>
            
            <div class="task_property_area">
              <div class="calendar_project_area">
                <div class="calendar_area" id="calendar_area">
                  <!-- 输入任务时间的表单 -->
                  <!-- <a>请输任务时间</a> -->
                  <button id="calendar" class="clock_button">
                    <svg t="1598153562536" class="icon" 
                    viewBox="0 0 1024 1024" version="1.1" 
                    xmlns="http://www.w3.org/2000/svg" 
                    p-id="3498" width="20" height="20">
                      <path d="M106.666667 810.666667V298.666667h810.666666v512c0 46.933333-38.4 85.333333-85.333333 85.333333H192c-46.933333 0-85.333333-38.4-85.333333-85.333333z" 
                      fill="#CFD8DC" p-id="3499">
                      </path>
                      <path d="M917.333333 213.333333v128H106.666667v-128c0-46.933333 38.4-85.333333 85.333333-85.333333h640c46.933333 0 85.333333 38.4 85.333333 85.333333z" 
                      fill="#F44336" p-id="3500"></path><path d="M704 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3501">
        
                      </path>
                      <path d="M320 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3502"></path><path d="M704 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667zM320 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667z" fill="#B0BEC5" p-id="3503">
        
                      </path><path d="M277.333333 426.666667h85.333334v85.333333h-85.333334zM405.333333 426.666667h85.333334v85.333333h-85.333334zM533.333333 426.666667h85.333334v85.333333h-85.333334zM661.333333 426.666667h85.333334v85.333333h-85.333334zM277.333333 554.666667h85.333334v85.333333h-85.333334zM405.333333 554.666667h85.333334v85.333333h-85.333334zM533.333333 554.666667h85.333334v85.333333h-85.333334zM661.333333 554.666667h85.333334v85.333333h-85.333334zM277.333333 682.666667h85.333334v85.333333h-85.333334zM405.333333 682.666667h85.333334v85.333333h-85.333334zM533.333333 682.666667h85.333334v85.333333h-85.333334zM661.333333 682.666667h85.333334v85.333333h-85.333334z" fill="#90A4AE" p-id="3504">
        
                      </path>
                    </svg>
                  </button>
                  <!-- <label id="inputlabel">please input your plantime</label>
                  <input type="text" id="plantime" > -->
                </div>
      
                <div id="project_area">
                  <!-- 任务的选择需要使用带层级标签的下拉列表 -->
                  <!-- <a>project select</a> -->
                  <label for="project_choose"></label>
                  <select name="project_choose" id="project_choose">
                    <option value="inbox">inbox</option>
                    <option value="work">work</option>
                    <option value="family">family</option>
                  </select>
                </div>
              </div>
      
              <div id="tags_review_area" class="tags_review_area">
                <div id="tasktags_area">
                  <!-- 选择标签，需要使用multi-selector  -->
                  <!-- <label for="tasktag">tasktag:</label> -->
                  <input type="text" name="tasktag" id="tasktag_selector" >
                  <!-- <select name="tasktag" id="tasktag_selector" multiple >
                    <option value="ub">输入标签</option>
                    <option value="IM">重要的</option>;
                    <option value="HA">困难的</option>;
                    <option value="UR">紧急的</option>; -->
                  </select>
                </div>
      
                <div id="reviewalgo_area">
                  <!-- 评价任务的窗口，和选择标签一样，都需要multi-secector  -->
                  <div id="task_reviewalgo_area">
                    <input type="text" name="reviewalgo" id="task_reviewalgo_selector">
                    <!-- <select name="taskreview" id="taskreview_selector" >
                      <option value="ub">输入回顾</option>
                      <option value="ub">使用大脑</option>
                      <option value="atom">原子化拆分</option>
                      <option value="diff">困难的事情</option> -->
                    </select>
                  </div>
                </div>
              </div>
            </div>
      
            <div>
              <!-- 输入标签的input窗口 -->
              <!-- <label id="tasktags" >please choose the tasktags</label> -->
              <!-- <input type="text" id="tags" placeholder="please choose the tasktags"/> -->
            </div>
      
            <div>
              <!-- 输入review的input窗口 -->
              <!-- <label id="reivew">please choose thd reviewalgo</label> -->
              <!-- <input type="text" id="reviewalgo" placeholder="please choose thd reviewalgo" /> -->
            </div>
            <div class="add_task_button_area">
              <button class="add_task_button">添加任务</button>
              <button class="cancel_add_task_button">取消</button>
            </div>
          </div>
            
        </div>
      </li>
      
      <!-- 这是一个Add按键，用来把添加任务的div放进去 -->
      <li id="add_task_button_area">
        <!-- <button id="plusbutton" class="plusbutton">this is a plus</button> -->
        <input type="button" name="plus" id="plusbutton" class="plusbutton" value="+">
      </li>
    </ul>
  </div>



  
  


 
        <!-- <style>
        .taskwrite div{
            display: inline-block;
          }
        </style> -->

    
        <!-- <svg 
        t="1598151010848" 
        class="icon" 
        viewBox="0 0 1024 1024" 
        version="1.1" 
        xmlns="http://www.w3.org/2000/svg" 
        p-id="2596" 
        width="20" 
        height="20"
        >
          <path d="M512 128C300.256 128 128 300.256 128 512s172.256 384 384 384 384-172.256 384-384S723.744 128 512 128z m0 64c177.12 0 320 142.88 320 320s-142.88 320-320 320S192 689.12 192 512 334.88 192 512 192z m-32 64v288h224v-64h-160V256z" p-id="2597">
          </path>
        </svg> -->
        <!-- 用的是阿里巴巴矢量图库里的svg -->
<!-- </li> -->


<!-- <button id="test_post">test the post function</button> -->

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- 下面是脚本文件，最后要做分离的 -->



<script type="text/javascript">

    // 翻转一个对象的key和value
    function swap(json){
      var ret = {};
      for(var key in json){
        ret[json[key]] = key;
      }
      return ret;
    }


    var tagscovert = {
      "importanttag": "重要的",
      'feartag': "害怕的",
      'principletag': "原则",
      'atomtag': "原子",
      'dfstag': "需要深度搜索",
      'hardtag': "困难的",
      'easytag': "容易的",
      'urgenttag': "急迫的",
      'challengetag': "挑战的",
      'uncomfortabletag': "不舒服的",
      'troublesometag': "麻烦事",
      'keyproblemtag': "关键问题",
      'tenminutestasktag': "10分钟",
      'thirtyminutestasktag': "30分钟",
      'threeminutestasktag': "3分钟",
    }

    // Object.values(字典)，是指把一个字典的所有值提取出来，Object.keys(字典)，是指把一个字典里所有key提取出来
    var tasktags_chinese = Object.values(tagscovert);

    console.log(tasktags_chinese)

    // 下面这个Swap的代码是把一个字典的键和值互换
    var tagscovert_chkey = swap(tagscovert);

    // var tagscovert_chkey = {
    //   '重要的': 'importanttag',
    //   '害怕的': 'feartag',
    //   '原则': 'principletag',
    //   '原子': 'atomtag',
    //   '需要深度搜索': 'dfstag',
    //   '困难的': 'hardtag',
    //   '容易的': 'easytag',
    //   '急迫的': 'urgenttag',
    //   '挑战的': 'challengetag',
    //   '不舒服的': 'uncomfortabletag',
    //   '麻烦事': 'troublesometag',
    //   '关键问题': 'keyproblemtag',
    //   '10分钟': 'tenminutestasktag',
    //   '30分钟': 'thirtyminutestasktag',
    //   '3分钟': 'threeminutestasktag'
    // }

    var reviewalgo_covert = {
          'attackactively':"主动进攻",
          'makeuseofthings':"利用学习到的东西",
          'depthfirstsearch':"深度优先搜索",
          'markataskimmediately':"立即标记任务",
          'alwaysprofit':"总是保持进步",
          'brainuse':"动脑筋",
          'useprinciple':"使用原则",
          'patience':"有耐心",
          'solveakeyproblem':"解决关键问题",
          'learnnewthings':"学习到新内容",
          'battlewithlowerbrain':"战胜低级情绪",
          'difficultthings':"完成困难事情",
          'acceptfactandseektruth':"接受事实，寻求真相",
          'dealwithahardtask':"处理困难任务",
          'threeminutes':"3分钟原则",
          'serviceforgoal':"为目标服务",
          'buildframeandprinciple':"建立框架原则",
          'atomadifficulttask':"原子化拆分任务",
          'noflinch':"不退缩",
          'learntechuse':"学习技术",
          'doanimportantthingearly':"提前完成一件重要的事",
          'acceptpain':"接受痛苦",
          'conquerthefear':"战胜恐惧"
    }

// Object.values(字典)，是指把一个字典的所有值提取出来，Object.keys(字典)，是指把一个字典里所有key提取出来
var reviewalgo_chinese = Object.values(reviewalgo_covert);

console.log(reviewalgo_chinese)

// 下面这个Swap的代码是把一个字典的键和值互换
var reviewalgo_covert_chkey = swap(reviewalgo_covert);



 //  define a inital tasktags
 var tasktags = {
      'importanttag': 'no',
      'feartag': 'no',
      'principletag': 'no',
      'atomtag': 'no',
      'dfstag': 'no',
      'hardtag': 'no',
      'easytag': 'no',
      'urgenttag': 'no',
      'challengetag': 'no',
      'uncomfortabletag': 'no',
      'troublesometag': 'no',
      'keyproblemtag': 'no',
      'tenminutestasktag': 'no',
      'thirtyminutestasktag': 'no',
      'threeminutestasktag': 'no'
    }

    // define a inital reviewalgo
    var reviewalgo = {
      'attackactively': 'no',
      'makeuseofthings': 'no',
      'depthfirstsearch': 'no',
      'markataskimmediately': 'no',
      'alwaysprofit': 'no',
      'brainuse': 'no',
      'useprinciple': 'no',
      'patience': 'no',
      'solveakeyproblem': 'no',
      'learnnewthings': 'no',
      'battlewithlowerbrain': 'no',
      'difficultthings': 'no',
      'acceptfactandseektruth': 'no',
      'dealwithahardtask': 'no',
      'threeminutes': 'no',
      'serviceforgoal': 'no',
      'buildframeandprinciple': 'no',
      'atomadifficulttask': 'no',
      'noflinch': 'no',
      'learntechuse': 'no',
      'doanimportantthingearly': 'no',
      'acceptpain': 'no',
      'conquerthefear': 'no'
    }





//  console.log(reviewalgo_covert_chkey) ;


function updatetask(id){
  // alert(`我正在输出checkbox 的 ID ${id}`)

  // var updatedtask = $("#updatedtask").val()
      var taskid = id.substring(8, 13)
      // alert(taskid)

      var updatedinfo =
      // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
      {
        'ifdissect': 'no',
        'deadline': 'unspecified',
        'starttime': 'unspecified',
        'endtime': 'unspecified',
        'tasktagsorigin': 'unspecified',
        'parentid': 'unspecified',
        'timedevotedto_a_task': 0,
        'goalcode': 'xxx',
        'client': 'gtdcli',
        'taglight': 'no',
        'note': 'unspecified',
        'reviewalgolight': 'no',
        'reviewalgo': {},
        'parentproject': 'unspecified',
        'id': taskid,
        'place': 'unspecified',
        'finishtime': 'unspecified',
        'inbox': 'nocontent',
        'project': 'inbox',
        'plantime': 'today',
        'taskstatus': 'finished',
        'tasktags': {}
      }

      $.ajax({
        type: "POST",
        url: "/v1/update",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify(updatedinfo),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { 
          geteverydaytask();
          // alert(data);
         },
        failure: function (errMsg) {
          alert(errMsg);
        }
      })
    }


// alert( "Handler for .click() called." );
      
      // 判断任务是否已经的函数
      function judge_task_finished(updatedinfo){
        // 下面的代码用来判断任务是否完成
        var reviewalgo = updatedinfo.reviewalgo;
        var search = "yes"
        console.log(reviewalgo);
        // if ( Object.keys(reviewalgo).length == 0) 
        if (inArray(search, reviewalgo)) {
          updatedinfo.taskstatus = "finished";
          console.log(updatedinfo);
        }
        else {
          alert("请先对任务进行评价才能点击完成按钮哦~");
         // return false;
          event.preventDefault();
         // 阻止click动作之后默认的操作
        }
      }
      

window.onload = function() {
  var input = document.querySelector('#g01-01');
  if (input) {   
    input.addEventListener('change', doalert, false);
  }
}

function geteverydaytask(){

  $.get("/v1/todayjson", function(data, status){
    // alert("Data: " + data + "\nStatus: " + status);
    console.log(data.task);
    var div = document.getElementById('todaytree');
    div.innerHTML = ""
    var  alltask=''
    var tasks = data.task
    // div.innerHTML += '<li>this is  a task<li>';
      var i = 0
      var head = '<h1>Today tasks</h1><ul class="tree">'
       var  tail = '</ul>'
       var  alltask = ''
      while (i<data.task.length)
    {
      // <input type="checkbox" name="checkfield" id="g01-01"  onchange="doalert(this.id)"/>
      var addedtask_head = `<div class="task_list_item">  <div class="task_list_item_task_area"> <div class="task_container"> <div class="round2"> <input type="checkbox" id= "checkbox${tasks[i].ID}" onchange="updatetask(this.id)" /> <label for="checkbox" id="chekboxlabel"></label> </div> </div> <div class="task_list_content"> `
      var addedtask_body = '<span type="text" name="" id=  class="task_list_item_input">这里是已经创建的任务 </span> '
      var addedtask_trail = '</div> </div> <div class="task_list_item_date_area"> <span class="task_list_item_date_button">这里是日期</span> </div> </div>'
      
      alltask=alltask+ `<li id = ${tasks[i].ID}>` + addedtask_head + "<a>" + tasks[i].task + "</a>" + addedtask_trail + "</li>";
    i++;
}
div.innerHTML += head+alltask+tail

  });
}

geteverydaytask()




// window.onload = function(){
// $("#tempid").click(function(){

//   var content = "任务1";
//   var task_content = document.getElementById("tempid");
//   task_content.firstChild.nodeValue = content;
// })



var add_task_item = document.getElementById("add_task_item");
// console.log(add_task_item);

$("#plusbutton").click(function(){

  var add_plus = document.getElementById("add_task_button_area");

  console.log(add_plus);

  const add_task_div = '<div class="add_task_area" id="add_task" > <div class="input_task_area"> <!-- onclick="test(this.getAttribute("id"))" --> <!-- onclick 指的是鼠标指上去，并不是点上去 --> <!-- 这里最输入任务的框，里面有各种需要传的参数 --> <!-- 设置输入任务的div --> <div class="div_container"> <!-- <label class="input-task-class" id="inputlabel">please input your task</label> --> <!-- 这一个input的位置出现了问题，原因就是使用了form标签，一点击就会重新刷新页面，去掉就好了，--> <input class="input_text" type="text" id="noid" placeholder="please input your task" > <!-- <button id="nonoid">点击添加task</button> --> <!-- <input id="testbutton" placeholder="please input your task"> --> </div> <div class="task_property_area"> <div class="calendar_project_area"> <div class="calendar_area" id="calendar_area"> <!-- 输入任务时间的表单 --> <!-- <a>请输任务时间</a> --> <button id="calendar" class="clock_button"> <svg t="1598153562536" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3498" width="20" height="20"> <path d="M106.666667 810.666667V298.666667h810.666666v512c0 46.933333-38.4 85.333333-85.333333 85.333333H192c-46.933333 0-85.333333-38.4-85.333333-85.333333z" fill="#CFD8DC" p-id="3499"> </path> <path d="M917.333333 213.333333v128H106.666667v-128c0-46.933333 38.4-85.333333 85.333333-85.333333h640c46.933333 0 85.333333 38.4 85.333333 85.333333z" fill="#F44336" p-id="3500"></path><path d="M704 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3501"> </path> <path d="M320 213.333333m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#B71C1C" p-id="3502"></path><path d="M704 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667zM320 64c-23.466667 0-42.666667 19.2-42.666667 42.666667v106.666666c0 23.466667 19.2 42.666667 42.666667 42.666667s42.666667-19.2 42.666667-42.666667V106.666667c0-23.466667-19.2-42.666667-42.666667-42.666667z" fill="#B0BEC5" p-id="3503"> </path><path d="M277.333333 426.666667h85.333334v85.333333h-85.333334zM405.333333 426.666667h85.333334v85.333333h-85.333334zM533.333333 426.666667h85.333334v85.333333h-85.333334zM661.333333 426.666667h85.333334v85.333333h-85.333334zM277.333333 554.666667h85.333334v85.333333h-85.333334zM405.333333 554.666667h85.333334v85.333333h-85.333334zM533.333333 554.666667h85.333334v85.333333h-85.333334zM661.333333 554.666667h85.333334v85.333333h-85.333334zM277.333333 682.666667h85.333334v85.333333h-85.333334zM405.333333 682.666667h85.333334v85.333333h-85.333334zM533.333333 682.666667h85.333334v85.333333h-85.333334zM661.333333 682.666667h85.333334v85.333333h-85.333334z" fill="#90A4AE" p-id="3504"> </path> </svg> </button> <!-- <label id="inputlabel">please input your plantime</label> <input type="text" id="plantime" > --> </div> <div id="project_area"> <!-- 任务的选择需要使用带层级标签的下拉列表 --> <!-- <a>project select</a> --> <label for="project_choose"></label> <select name="project_choose" id="project_choose"> <option value="inbox">inbox</option> <option value="work">work</option> <option value="family">family</option> </select> </div> </div> <div id="tags_review_area" class="tags_review_area"> <div id="tasktags_area"> <!-- 选择标签，需要使用multi-selector --> <!-- <label for="tasktag">tasktag:</label> --> <select name="tasktag" id="tasktag_selector" > <option value="ub">输入标签</option> <option value="IM">重要的</option>; <option value="HA">困难的</option>; <option value="UR">紧急的</option>; </select> </div> <div id="reviewalgo_area"> <!-- 评价任务的窗口，和选择标签一样，都需要multi-secector --> <div id="task_reviewalgo_area"> <select name="taskreview" id="taskreview_selector" > <option value="ub">输入回顾</option> <option value="ub">使用大脑</option> <option value="atom">原子化拆分</option> <option value="diff">困难的事情</option> </select> </div> </div> </div> </div> <div> <!-- 输入标签的input窗口 --> <!-- <label id="tasktags" >please choose the tasktags</label> --> <!-- <input type="text" id="tags" placeholder="please choose the tasktags"/> --> </div> <div> <!-- 输入review的input窗口 --> <!-- <label id="reivew">please choose thd reviewalgo</label> --> <!-- <input type="text" id="reviewalgo" placeholder="please choose thd reviewalgo" /> --> </div> </div> <div class="add_task_button_area"> <button class="add_task_button">添加任务</button> <button class="cancel_add_task_button">取消</button> </div> </div>'

  add_plus.innerHTML += add_task_div;

  document.getElementById("plusbutton").outerHTML = "";

})

  // const nospecifiedtaskdivcode =

    var taskid_div = "noid";

   
  

    //  添加日期的组件
    function yyyymmdd(dateIn) {
      var yyyy = dateIn.getFullYear();
      var mm = dateIn.getMonth() + 1; // getMonth() is zero-based
      var dd = dateIn.getDate();
      var timereturn = String(10000 * yyyy + 100 * mm + dd);
      var finaltime = timereturn.substring(2, 8)
      return finaltime
      // Leading zeros for mm and dd
    }

    // 把日期传入的js代码
    // var today = new Date();
    // console.log(yyyymmdd(today));

    var plantime = "unspecified"
    // $("#calendar").click(function () 
    $(document).on("click","#calendar",function()
    {
      let myPicker = new SimplePicker();
      myPicker.open();
      myPicker.on('submit', function (date, readableDate) {
        // alert(date);
        plantime = yyyymmdd(date)
        // alert("ma is here!!!!!!!!!!!")
        // alert(plantime)
        // plantime = conver
        // alert(readableDate)
      })
      // alert("ma is here")
      myPicker.on('close', function (date) {
        // ...
      })
      // myPicker.close()
    })
    // 输入任务的标签组件
    // var temtags = ['重要', '害怕', '原则','原子化','dfs','困难','容易','紧急','挑战','麻烦事','主要问题', '10分钟', '3分钟', '30分钟']


    // 更新标签的函数
    
    // 对字典进行中英文变换,用在tags和review中,dict是英汉对应下的字典，key是通过inputtags传入的中文
    function getdictvaluearray(dict,keys){
    var values = [] 
    for (let i = 0; i < keys.length; i++) {
      values.push(dict[keys[i]])
    }
    return  values
    }
    
    // 更新tags
    function updatetags(tagsarray) {
      const tasktags_fixed = {
      'importanttag': 'no',
      'feartag': 'no',
      'principletag': 'no',
      'atomtag': 'no',
      'dfstag': 'no',
      'hardtag': 'no',
      'easytag': 'no',
      'urgenttag': 'no',
      'challengetag': 'no',
      'uncomfortabletag': 'no',
      'troublesometag': 'no',
      'keyproblemtag': 'no',
      'tenminutestasktag': 'no',
      'thirtyminutestasktag': 'no',
      'threeminutestasktag': 'no'
      }

      var tem_tags = tasktags_fixed;
      // console.log("下面是打印tasktags_fixed")
      // console.log(tasktags_fixed)

      for (let i = 0; i < tagsarray.length; i++) {
        tem_tags[tagsarray[i]] = "yes";
      }
      // console.log(`我正在输出tagsarray${tagsarray}`)
      // console.log(tagsarray)
      // console.log("tags更新完成")
      // console.log(tem_tags);
      // console.log("下面是tasktags_fixed")
      // console.log(tasktags_fixed)
      return tem_tags;
    }

    // 更新评价的函数
    function updatereviewalgo(reviewarray) {
      const reviewalgo_fixed = {
      'attackactively': 'no',
      'makeuseofthings': 'no',
      'depthfirstsearch': 'no',
      'markataskimmediately': 'no',
      'alwaysprofit': 'no',
      'brainuse': 'no',
      'useprinciple': 'no',
      'patience': 'no',
      'solveakeyproblem': 'no',
      'learnnewthings': 'no',
      'battlewithlowerbrain': 'no',
      'difficultthings': 'no',
      'acceptfactandseektruth': 'no',
      'dealwithahardtask': 'no',
      'threeminutes': 'no',
      'serviceforgoal': 'no',
      'buildframeandprinciple': 'no',
      'atomadifficulttask': 'no',
      'noflinch': 'no',
      'learntechuse': 'no',
      'doanimportantthingearly': 'no',
      'acceptpain': 'no',
      'conquerthefear': 'no'
    }
      var tmp_reviewalgo = reviewalgo_fixed;
    for(var i =0; i<reviewarray.length; i++){
      tmp_reviewalgo[reviewarray[i]] = "yes"
    }
    return tmp_reviewalgo;
    }



   

// 标签的输入

  $("#tasktag_selector").inputTags({
      autocomplete: {
        values: tasktags_chinese,
        only: true
      },
      // max: 3,
      // create: function() {
      //     console.log('Tag added !');
      // },

      init: function ($elem) {
        // console.log('Event called on plugin init', $elem);
        // tasktags = updatetags($elem.tags);
      },

      create: function ($elem) {
        console.log('Event called when an item is created', $elem);
        // alert($elem.tags)
        // alert("hellohellohello");
        // console.log(tasktags);
        console.log($elem.tags);
        var newtag = getdictvaluearray(tagscovert_chkey,$elem.tags);
        console.log(newtag);
        tasktags = updatetags(newtag);
        console.log(tasktags);
      },

      update: function ($elem) {
        console.log('Event called when an item is updated', $elem);
        // tasktags = updatetags($elem.tags);
        var newtag = getdictvaluearray(tagscovert_chkey,$elem.tags);
        console.log(newtag);
        tasktags = updatetags(newtag);
        console.log(tasktags);

      },

      destroy: function ($elem) {
        console.log('Event called when an item is deleted', $elem);
        console.log($elem.tags);
        var newtag = getdictvaluearray(tagscovert_chkey,$elem.tags);
        console.log(newtag);
        tasktags = updatetags(newtag);
        console.log(tasktags);
        // tasktags = updatetags($elem.tags);
      },

      selected: function ($elem) {
        console.log('Event called when an item is selected', $elem);
        tasktags = updatetags($elem.tags);
      },

      unselected: function ($elem) {
        console.log('Event called when an item is unselected', $elem);
        tasktags = updatetags($elem.tags);
      },

      change: function ($elem) {
        console.log('Event called on item change', $elem);
        tasktags = updatetags($elem.tags);
      },

      autocompleteTagSelect: function ($elem) {
        console.log('Event called on tag selection', $elem);
        tasktags = updatetags($elem.tags);
      }
    }
    );


    // review的选择输入

    $("#task_reviewalgo_selector").inputTags({
      autocomplete: {
        values: reviewalgo_chinese,
        only: true
      },
      // max: 3,

      // create: function() {
      //     console.log('Tag added !');
      // },

      init: function ($elem) {
        // console.log('Event called on plugin init', $elem);
        // reviewalgo = updatereviewalgo($elem.tags);

      },

      create: function ($elem) {
        // console.log('Event called when an item is created', $elem);
        // alert($elem.tags)
        // alert("hellohellohello");
        // console.log(tasktags);
        // console.log($elem.tags);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      update: function ($elem) {
        console.log('Event called when an item is updated', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      destroy: function ($elem) {
        console.log('Event called when an item is deleted', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      selected: function ($elem) {
        console.log('Event called when an item is selected', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      unselected: function ($elem) {
        console.log('Event called when an item is unselected', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      change: function ($elem) {
        console.log('Event called on item change', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      },

      autocompleteTagSelect: function ($elem) {
        console.log('Event called on tag selection', $elem);
        var newreviewalgo = getdictvaluearray(reviewalgo_covert_chkey,$elem.tags);
        console.log(newreviewalgo);
        reviewalgo = updatereviewalgo(newreviewalgo);
        console.log(reviewalgo);
      }
    }
    );
    

    // for (var i = 0; i < tasktags.length; i++) {
    //         // const element = array[i];
    //         if($elem[i]= Object.keys(tasktags)[i]){
    //           tasktags[i] = $elem[i];
    //         }
    //           alert("tasktags")
    //     };

    // 下面是输入任务的JS代码

    // $("#testbutton").keypress(function(event){
    //   if(event.key === "Enter"){
    //     $.get("/v1/test", function(data, status){
    //       alert("Data: " + data + "\nStatus: " + status);
    //     });
    //   }
  
    // });
    
// $("#test_post").click(function(){
//   alert("why so  gaoxiao!!!!")
// })


    // $("#noid").keypress(function (event)
    $(document).on("keypress","#noid",function(event)
    {
      if (event.key === "Enter") {
        // alert("点击回车");

        console.log("ma is here")
        //var task1 = {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'we ar', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Fri Aug 21 22:38:23 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}
        // 下面这行代码把在Input里输入的内容传入到inputedtask这个变量里
        var inputedtask = $("#noid").val();
        // var inputedtask = document.getElementById("createtask").getAttribute("placeholder");
        // console.log(inputedtask);
        // alert(inputedtask);
        // var plantime =  $("#plantime").val()
        // alert(inputedtask)
        //  alert("检查plantime")
        //  alert(plantime)
        var testis = "ma is here";
        var task = {
          'starttime': 'unspecified',
          'deadline': 'unspecified',
          'endtime': 'unspecified',
          'ifdissect': 'no',
          'note': 'unspecified',
          'parentid': 'unspecified',
          'timedevotedto_a_task': 0,
          'client': 'gtdcli',
          'goalcode': 'aaa',
          'parentproject': 'unspecified',
          'inboxlist': 'empty',
          'inbox': inputedtask,
          'finishtime': 'unspecified',
          'reviewalgolight': 'no',
          'reviewalgo': reviewalgo,
          'place': 'unspecified',
          'input-time': 'Fri Aug 21 22:38:23 2020',
          'project': 'inbox',
          'taskstatus': 'unfinished',
          'plantime': plantime,
          'taglight': 'yes',
          'tasktags': tasktags,
          'tasktagsorigin': 'e'
        };
        console.log(task);
        // alert(plantime);
        // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}

        $.ajax({
          type: "POST",
          url: "/v1/createtask",
          // The key needs to match your method's input parameter (case-sensitive).
          data: JSON.stringify(task),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (data) {
            // var taskid = data.taskid
            // $("#thisnode").setproperty("taskid")=taskid
            // <p taskid=1544>
              geteverydaytask()
              // 上面使用了geteverydaytask的函数来达到把输入的task放到上面的效果
            // alert(data);
            console.log("i am printing the return data from server")
            console.log(data)
            var taskid = data.taskid;
            // alert(taskid);
            const taskdom = document.querySelector("#tempid")
            console.log(taskdom);
            // taskdom.setAttribute("taskid", taskid);
            // taskdom.setAttribute("id", taskid);
            // console.log(data);
          },
          failure: function (errMsg) {
            alert(errMsg);
          }
          //  alert(errMsg);
        })
      }
    });

    // 这是更新任务的JS代码

    // 这里使用的是回调函数的taskinfo，而不是自己凭空创建的
    var updatedinfo =
    // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
    {
      'ifdissect': 'no',
      'deadline': 'unspecified',
      'starttime': 'unspecified',
      'endtime': 'unspecified',
      'tasktagsorigin': 'unspecified',
      'parentid': 'unspecified',
      'timedevotedto_a_task': 0,
      'goalcode': 'xxx',
      'client': 'gtdcli',
      'taglight': 'no',
      'note': 'unspecified',
      'reviewalgolight': 'no',
      'reviewalgo': { "123": "" },
      'parentproject': 'unspecified',
      'id': "unspecified",
      'place': 'unspecified',
      'finishtime': 'unspecified',
      'inbox': 'unspecified',
      'project': 'inbox',
      'plantime': 'today',
      'taskstatus': 'unfinished',
      'tasktags': {}
    }

    // 下面的函数用来判断一个字典里面是否含有某个value
    function inArray(search, array) {
      for (var i in array) {
        if (array[i] == search) {
          return true;
        }
      }
      return false;
    }

    // 点击checkbox将会执行的event
    
    $("#checkbox_box").click(function (event) {
      
      // alert("You have to evaluate the task before finish it")
      // return false;
    }
    );




    $("#updatetask").click(function () {
      //var task1 = {'starttime': 'unspecified', 'deadline': 'unspecified', 'endtime': 'unspecified', 'ifdissect': 'no', 'note': 'unspecified', 'parentid': 'unspecified', 'timedevotedto_a_task': 0, 'client': 'gtdcli', 'goalcode': 'aaa', 'parentproject': 'unspecified', 'inboxlist': 'empty', 'inbox': 'we ar', 'finishtime': 'unspecified', 'reviewalgolight': 'no', 'reviewalgo': {}, 'place': 'unspecified', 'input-time': 'Fri Aug 21 22:38:23 2020', 'project': 'inbox', 'taskstatus': 'unfinished', 'plantime': 'today', 'taglight': 'yes', 'tasktags': {'importanttag': 'no', 'feartag': 'no', 'principletag': 'no', 'atomtag': 'no', 'dfstag': 'no', 'hardtag': 'no', 'easytag': 'yes', 'urgenttag': 'no', 'challengetag': 'no', 'uncomfortabletag': 'no', 'troublesometag': 'no', 'keyproblemtag': 'no', 'tenminutestasktag': 'no', 'thirtyminutestasktag': 'no', 'threeminutestasktag': 'no'}, 'tasktagsorigin': 'e'}
      var updatedtask = $("#updatedtask").val()
      var taskid = $("#taskid").val()
      alert(taskid)

      var updatedinfo =
      // {"inbox":"we am creating task","client":"gtdcli","goalcode":"aaa","tasktags":{"importanttag":"yes"},"parentid":"unspecified"}
      {
        'ifdissect': 'no',
        'deadline': 'unspecified',
        'starttime': 'unspecified',
        'endtime': 'unspecified',
        'tasktagsorigin': 'unspecified',
        'parentid': 'unspecified',
        'timedevotedto_a_task': 0,
        'goalcode': 'xxx',
        'client': 'gtdcli',
        'taglight': 'no',
        'note': 'unspecified',
        'reviewalgolight': 'no',
        'reviewalgo': {},
        'parentproject': 'unspecified',
        'id': taskid,
        'place': 'unspecified',
        'finishtime': 'unspecified',
        'inbox': updatedtask,
        'project': 'inbox',
        'plantime': 'today',
        'taskstatus': 'unfinished',
        'tasktags': {}
      }
      $.ajax({
        type: "POST",
        url: "/v1/update",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify(updatedinfo),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { alert(data); },
        failure: function (errMsg) {
          alert(errMsg);
        }
      })
    })


</script>
   
     
 


</body>

</html>